{"extensionStorage":{"SPscenes":{"scenes":{"scene-1":{"targets":{"Nhv2]pJcrZ~;Bbo?=6gR":{"x":0,"y":0,"rotation":"all around","direction":90,"drag":false,"size":100,"effects":{"color":0,"fisheye":0,"whirl":0,"pixelate":0,"mosaic":0,"brightness":0,"ghost":0},"visible":true,"costume":0,"vars":[["`jEk@4|i[#Fk?(8x)AV.-my variable",0]],"tempo":60,"isStage":true,"isOg":true,"ogID":"Nhv2]pJcrZ~;Bbo?=6gR","penData":{},"extStore":{"SPscenes":{"ogID":"Nhv2]pJcrZ~;Bbo?=6gR"}}},"C4H6HTz?78q|qll;p9dn":{"x":-0.9999976476035002,"y":108,"rotation":"all around","direction":90,"drag":false,"size":100,"effects":{"color":0,"fisheye":0,"whirl":0,"pixelate":0,"mosaic":0,"brightness":0,"ghost":0},"visible":true,"costume":0,"vars":[],"tempo":60,"isStage":false,"isOg":true,"ogID":"C4H6HTz?78q|qll;p9dn","penData":{},"extStore":{"SPscenes":{"ogID":"C4H6HTz?78q|qll;p9dn"}}},"kdnq^+3jMZx6NYc4-n=e":{"x":-0.9999985376994736,"y":-51,"rotation":"all around","direction":90,"drag":false,"size":30,"effects":{"color":0,"fisheye":0,"whirl":0,"pixelate":0,"mosaic":0,"brightness":0,"ghost":0},"visible":true,"costume":0,"vars":[],"tempo":60,"isStage":false,"isOg":true,"ogID":"kdnq^+3jMZx6NYc4-n=e","penData":{},"extStore":{"SPscenes":{"ogID":"kdnq^+3jMZx6NYc4-n=e"}}}},"extra":{"runtimeOpts":{"turbomode":false,"interpolate":false,"fence":true,"miscLim":true,"highQuality":false,"fps":30,"dimensions":[480,360]},"extData":{}}},"Gamep1":{"targets":{"Nhv2]pJcrZ~;Bbo?=6gR":{"x":0,"y":0,"rotation":"all around","direction":90,"drag":false,"size":100,"effects":{"color":0,"fisheye":0,"whirl":0,"pixelate":0,"mosaic":0,"brightness":0,"ghost":0},"visible":true,"costume":0,"vars":[["`jEk@4|i[#Fk?(8x)AV.-my variable",0]],"tempo":60,"isStage":true,"isOg":true,"ogID":"Nhv2]pJcrZ~;Bbo?=6gR","penData":{},"extStore":{"SPscenes":{"ogID":"Nhv2]pJcrZ~;Bbo?=6gR"}}},"C4H6HTz?78q|qll;p9dn":{"x":-0.9999976476035002,"y":108,"rotation":"all around","direction":90,"drag":false,"size":100,"effects":{"color":0,"fisheye":0,"whirl":0,"pixelate":0,"mosaic":0,"brightness":0,"ghost":0},"visible":true,"costume":0,"vars":[],"tempo":60,"isStage":false,"isOg":true,"ogID":"C4H6HTz?78q|qll;p9dn","penData":{},"extStore":{"SPscenes":{"ogID":"C4H6HTz?78q|qll;p9dn"}}},"kdnq^+3jMZx6NYc4-n=e":{"x":-0.9999985376994736,"y":-51,"rotation":"all around","direction":90,"drag":false,"size":30,"effects":{"color":0,"fisheye":0,"whirl":0,"pixelate":0,"mosaic":0,"brightness":0,"ghost":0},"visible":true,"costume":0,"vars":[],"tempo":60,"isStage":false,"isOg":true,"ogID":"kdnq^+3jMZx6NYc4-n=e","penData":{},"extStore":{"SPscenes":{"ogID":"kdnq^+3jMZx6NYc4-n=e"}}}},"extra":{"runtimeOpts":{"turbomode":false,"interpolate":false,"fence":true,"miscLim":true,"highQuality":false,"fps":30,"dimensions":[480,360]},"extData":{}}}}}},"targets":[{"isStage":true,"name":"Stage","variables":{"`jEk@4|i[#Fk?(8x)AV.-my variable":["my variable",0]},"lists":{},"broadcasts":{"BjUnhC4?F.GB{-[fpL+n":"message1",":}_b$H_xUz^e9.7})P(J":"fff"},"blocks":{"(":{"opcode":"event_whenflagclicked","next":"r","parent":null,"inputs":{},"fields":{},"topLevel":true},"r":{"opcode":"SPscenes_switchScene","next":null,"parent":"(","inputs":{"NAME":[1,")"]},"fields":{}},")":{"opcode":"SPscenes_menu_SCENES","next":null,"parent":"r","inputs":{},"fields":{"SCENES":["scene-1",null]},"shadow":true},"*":{"opcode":"SPscenes_whenSceneSwitch","next":"c","parent":null,"inputs":{},"fields":{"NAME":["Gamep1",null]},"topLevel":true},"s":{"opcode":"sound_playuntildone","next":null,"parent":"c","inputs":{"SOUND_MENU":[1,"+"]},"fields":{}},"+":{"opcode":"sound_sounds_menu","next":null,"parent":"s","inputs":{},"fields":{"SOUND_MENU":["00 - iomkr - Something's incredibly wrong",null]},"shadow":true},"c":{"opcode":"control_repeat_until","next":null,"parent":"*","inputs":{"SUBSTACK":[2,"s"],"CONDITION":[2,"t"]},"fields":{}},",":{"opcode":"SPscenes_currentScene","next":null,"parent":"u","inputs":{},"fields":{}},"u":{"opcode":"operator_equals","next":null,"parent":"t","inputs":{"OPERAND1":[3,",",[10,""]],"OPERAND2":[1,[10,"gamep1"]]},"fields":{}},"t":{"opcode":"operator_not","next":null,"parent":"c","inputs":{"OPERAND":[2,"u"]},"fields":{}}},"comments":{"ax":{"blockId":null,"x":50,"y":50,"width":350,"height":170,"minimized":false,"text":"Configuration for https://turbowarp.org/\nYou can move, resize, and minimize this comment, but don't edit it by hand. This comment can be deleted to remove the stored settings.\n{} // _twconfig_"}},"currentCostume":0,"costumes":[{"name":"backdrop1","bitmapResolution":1,"dataFormat":"svg","assetId":"f7cedf313f61923dc7addfadd099ea3a","md5ext":"f7cedf313f61923dc7addfadd099ea3a.svg","rotationCenterX":340,"rotationCenterY":216.5}],"sounds":[{"name":"00 - iomkr - Something's incredibly wrong","assetId":"a7cf191ac4d43ced19b49cea0b9baf72","dataFormat":"wav","format":"","rate":44100,"sampleCount":182483,"md5ext":"a7cf191ac4d43ced19b49cea0b9baf72.wav"}],"volume":100,"layerOrder":0,"tempo":60,"videoTransparency":50,"videoState":"on","textToSpeechLanguage":null,"extensionStorage":{"SPscenes":{"ogID":"Nhv2]pJcrZ~;Bbo?=6gR"}}},{"isStage":false,"name":"Sprite2","variables":{},"lists":{},"broadcasts":{},"blocks":{"-":{"opcode":"event_whenflagclicked","next":"v","parent":null,"inputs":{},"fields":{},"topLevel":true},"v":{"opcode":"looks_show","next":"w","parent":"-","inputs":{},"fields":{}},"w":{"opcode":"control_wait","next":"x","parent":"v","inputs":{"DURATION":[1,[5,"1"]]},"fields":{}},"x":{"opcode":"text_setColor","next":"y","parent":"w","inputs":{"COLOR":[1,[9,"#000000"]]},"fields":{}},"y":{"opcode":"text_setFont","next":"z","parent":"x","inputs":{},"fields":{"FONT":["\"nintendoP_DotGothic12-M\", Pixel",null]}},"z":{"opcode":"text_setText","next":"d","parent":"y","inputs":{"TEXT":[1,[10,"This is the state of the world."]]},"fields":{}},"d":{"opcode":"text_animateUntilDone","next":"A","parent":"z","inputs":{"ANIMATE":[1,"."]},"fields":{}},".":{"opcode":"text_menu_twAnimate","next":null,"parent":"d","inputs":{},"fields":{"twAnimate":["type",null]},"shadow":true},"A":{"opcode":"control_wait","next":"B","parent":"d","inputs":{"DURATION":[1,[5,"1"]]},"fields":{}},"B":{"opcode":"text_setText","next":"e","parent":"A","inputs":{"TEXT":[1,[10,"All the humans died from a illness 70 Years ago."]]},"fields":{}},"e":{"opcode":"text_animateUntilDone","next":"C","parent":"B","inputs":{"ANIMATE":[1,"/"]},"fields":{}},"/":{"opcode":"text_menu_twAnimate","next":null,"parent":"e","inputs":{},"fields":{"twAnimate":["type",null]},"shadow":true},"C":{"opcode":"control_wait","next":"D","parent":"e","inputs":{"DURATION":[1,[5,"1"]]},"fields":{}},"D":{"opcode":"text_setText","next":"f","parent":"C","inputs":{"TEXT":[1,[10,"This needs to be fixed."]]},"fields":{}},"f":{"opcode":"text_animateUntilDone","next":"E","parent":"D","inputs":{"ANIMATE":[1,":"]},"fields":{}},":":{"opcode":"text_menu_twAnimate","next":null,"parent":"f","inputs":{},"fields":{"twAnimate":["type",null]},"shadow":true},"E":{"opcode":"control_wait","next":"F","parent":"f","inputs":{"DURATION":[1,[5,"1"]]},"fields":{}},"F":{"opcode":"looks_hide","next":"G","parent":"E","inputs":{},"fields":{}},"G":{"opcode":"SPscenes_switchScene","next":null,"parent":"F","inputs":{"NAME":[1,";"]},"fields":{}},";":{"opcode":"SPscenes_menu_SCENES","next":null,"parent":"G","inputs":{},"fields":{"SCENES":["Gamep1",null]},"shadow":true},"=":{"opcode":"event_whenbroadcastreceived","next":"H","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["message1","BjUnhC4?F.GB{-[fpL+n"]},"topLevel":true},"H":{"opcode":"looks_show","next":"I","parent":"=","inputs":{},"fields":{}},"I":{"opcode":"control_wait","next":"J","parent":"H","inputs":{"DURATION":[1,[5,"1"]]},"fields":{}},"J":{"opcode":"text_setColor","next":"K","parent":"I","inputs":{"COLOR":[1,[9,"#000000"]]},"fields":{}},"K":{"opcode":"text_setFont","next":"L","parent":"J","inputs":{},"fields":{"FONT":["\"nintendoP_DotGothic12-M\", Pixel",null]}},"L":{"opcode":"text_setText","next":"g","parent":"K","inputs":{"TEXT":[1,[10,"Research Was done."]]},"fields":{}},"g":{"opcode":"text_animateUntilDone","next":"M","parent":"L","inputs":{"ANIMATE":[1,"?"]},"fields":{}},"?":{"opcode":"text_menu_twAnimate","next":null,"parent":"g","inputs":{},"fields":{"twAnimate":["type",null]},"shadow":true},"M":{"opcode":"control_wait","next":"N","parent":"g","inputs":{"DURATION":[1,[5,"1"]]},"fields":{}},"N":{"opcode":"text_setText","next":"h","parent":"M","inputs":{"TEXT":[1,[10,"A ailen was born."]]},"fields":{}},"h":{"opcode":"text_animateUntilDone","next":"O","parent":"N","inputs":{"ANIMATE":[1,"@"]},"fields":{}},"@":{"opcode":"text_menu_twAnimate","next":null,"parent":"h","inputs":{},"fields":{"twAnimate":["type",null]},"shadow":true},"O":{"opcode":"control_wait","next":"P","parent":"h","inputs":{"DURATION":[1,[5,"1"]]},"fields":{}},"[":{"opcode":"text_setText","next":"i","parent":null,"inputs":{"TEXT":[1,[10,"This needs to be fixed."]]},"fields":{},"topLevel":true},"i":{"opcode":"text_animateUntilDone","next":"Q","parent":"[","inputs":{"ANIMATE":[1,"]"]},"fields":{}},"]":{"opcode":"text_menu_twAnimate","next":null,"parent":"i","inputs":{},"fields":{"twAnimate":["type",null]},"shadow":true},"P":{"opcode":"looks_hide","next":"^","parent":"O","inputs":{},"fields":{}},"Q":{"opcode":"SPscenes_switchScene","next":null,"parent":"i","inputs":{"NAME":[1,"_"]},"fields":{}},"_":{"opcode":"SPscenes_menu_SCENES","next":null,"parent":"Q","inputs":{},"fields":{"SCENES":["Gamep1",null]},"shadow":true},"^":{"opcode":"event_broadcast","next":null,"parent":"P","inputs":{"BROADCAST_INPUT":[1,[11,"fff",":}_b$H_xUz^e9.7})P(J"]]},"fields":{}}},"comments":{},"currentCostume":0,"costumes":[{"name":"costume1","bitmapResolution":1,"dataFormat":"svg","assetId":"64d0e8aab624e851bc5afd10a434195f","md5ext":"64d0e8aab624e851bc5afd10a434195f.svg","rotationCenterX":40.5,"rotationCenterY":18.5}],"sounds":[],"volume":100,"layerOrder":1,"visible":false,"x":-0.9999976476035002,"y":108,"size":100,"direction":90,"draggable":false,"rotationStyle":"all around","extensionStorage":{"SPscenes":{"ogID":"C4H6HTz?78q|qll;p9dn"}}},{"isStage":false,"name":"slime","variables":{},"lists":{},"broadcasts":{},"blocks":{"ax":{"opcode":"SPscenes_whenSceneSwitch","next":null,"parent":null,"inputs":{},"fields":{"NAME":["Gamep1",null]},"topLevel":true},"R":{"opcode":"control_forever","next":null,"parent":"`","inputs":{"SUBSTACK":[2,"j"]},"fields":{}},"j":{"opcode":"control_while","next":null,"parent":"R","inputs":{"CONDITION":[2,"S"],"SUBSTACK":[2,"{"]},"fields":{}},"S":{"opcode":"sensing_keypressed","next":null,"parent":"j","inputs":{"KEY_OPTION":[1,"|"]},"fields":{}},"|":{"opcode":"sensing_keyoptions","next":null,"parent":"S","inputs":{},"fields":{"KEY_OPTION":["right arrow",null]},"shadow":true},"{":{"opcode":"motion_changexby","next":null,"parent":"j","inputs":{"DX":[1,[4,"5"]]},"fields":{}},"T":{"opcode":"control_forever","next":null,"parent":"}","inputs":{"SUBSTACK":[2,"k"]},"fields":{}},"k":{"opcode":"control_while","next":null,"parent":"T","inputs":{"CONDITION":[2,"U"],"SUBSTACK":[2,"~"]},"fields":{}},"U":{"opcode":"sensing_keypressed","next":null,"parent":"k","inputs":{"KEY_OPTION":[1,"aa"]},"fields":{}},"aa":{"opcode":"sensing_keyoptions","next":null,"parent":"U","inputs":{},"fields":{"KEY_OPTION":["left arrow",null]},"shadow":true},"~":{"opcode":"motion_changexby","next":null,"parent":"k","inputs":{"DX":[1,[4,"-5"]]},"fields":{}},"}":{"opcode":"event_whenflagclicked","next":"T","parent":null,"inputs":{},"fields":{},"topLevel":true},"`":{"opcode":"event_whenflagclicked","next":"R","parent":null,"inputs":{},"fields":{},"topLevel":true},"l":{"opcode":"speechSP_sayThis","next":"V","parent":"a","inputs":{"SPEECH":[1,[10,"Ahhh! PLEASE HEL-"]],"SPRITE":[1,"ab"]},"fields":{}},"ab":{"opcode":"speechSP_menu_TARGETS","next":null,"parent":"l","inputs":{},"fields":{"TARGETS":["_myself_",null]},"shadow":true},"a":{"opcode":"speechSP_bubbleFont","next":"l","parent":"m","inputs":{"SPRITE":[1,"ac"],"FONT":[1,"ad"]},"fields":{}},"ac":{"opcode":"speechSP_menu_TARGETS","next":null,"parent":"a","inputs":{},"fields":{"TARGETS":["_myself_",null]},"shadow":true},"ad":{"opcode":"speechSP_menu_FONTS","next":null,"parent":"a","inputs":{},"fields":{"FONTS":["\"nintendoP_DotGothic12-M\", Pixel",null]},"shadow":true},"ae":{"opcode":"event_whenbroadcastreceived","next":"m","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["fff",":}_b$H_xUz^e9.7})P(J"]},"topLevel":true},"m":{"opcode":"speechSP_bubbleColor","next":"a","parent":"ae","inputs":{"SPRITE":[1,"af"],"COLOR":[1,[9,"#276505"]]},"fields":{"TYPE":["background",null]}},"af":{"opcode":"speechSP_menu_TARGETS","next":null,"parent":"m","inputs":{},"fields":{"TARGETS":["_myself_",null]},"shadow":true},"n":{"opcode":"speechSP_shutUp","next":"W","parent":"V","inputs":{"SPRITE":[1,"ag"]},"fields":{}},"ag":{"opcode":"speechSP_menu_TARGETS","next":null,"parent":"n","inputs":{},"fields":{"TARGETS":["_myself_",null]},"shadow":true},"V":{"opcode":"control_wait","next":"n","parent":"l","inputs":{"DURATION":[1,[5,"1"]]},"fields":{}},"ah":{"opcode":"looks_changeeffectby","next":null,"parent":"X","inputs":{"CHANGE":[1,[4,"25"]]},"fields":{"EFFECT":["GHOST",null]}},"W":{"opcode":"control_repeat","next":null,"parent":"n","inputs":{"TIMES":[1,[6,"4"]],"SUBSTACK":[2,"X"]},"fields":{}},"X":{"opcode":"control_wait","next":"ah","parent":"W","inputs":{"DURATION":[1,[5,".20"]]},"fields":{}},"ai":{"opcode":"looks_cleargraphiceffects","next":null,"parent":"aj","inputs":{},"fields":{}},"aj":{"opcode":"event_whenflagclicked","next":"ai","parent":null,"inputs":{},"fields":{},"topLevel":true}},"comments":{},"currentCostume":0,"costumes":[{"name":"New Piskel","bitmapResolution":2,"dataFormat":"png","assetId":"ca9b9ff200584ae5010b4f417f12583d","md5ext":"ca9b9ff200584ae5010b4f417f12583d.png","rotationCenterX":256,"rotationCenterY":256}],"sounds":[],"volume":100,"layerOrder":2,"visible":true,"x":-70.99999853769947,"y":-51,"size":30,"direction":90,"draggable":false,"rotationStyle":"all around","extensionStorage":{"SPscenes":{"ogID":"kdnq^+3jMZx6NYc4-n=e"}}},{"isStage":false,"name":"Sprite1","variables":{},"lists":{},"broadcasts":{},"blocks":{"ak":{"opcode":"event_whenflagclicked","next":"al","parent":null,"inputs":{},"fields":{},"topLevel":true},"al":{"opcode":"looks_hide","next":null,"parent":"ak","inputs":{},"fields":{}},"am":{"opcode":"SPscenes_whenSceneSwitch","next":"Y","parent":null,"inputs":{},"fields":{"NAME":["Gamep1",null]},"topLevel":true},"Y":{"opcode":"looks_show","next":"o","parent":"am","inputs":{},"fields":{}},"o":{"opcode":"control_wait_until","next":"an","parent":"Y","inputs":{"CONDITION":[2,"Z"]},"fields":{}},"Z":{"opcode":"sensing_touchingobject","next":null,"parent":"o","inputs":{"TOUCHINGOBJECTMENU":[1,"ao"]},"fields":{}},"ao":{"opcode":"sensing_touchingobjectmenu","next":null,"parent":"Z","inputs":{},"fields":{"TOUCHINGOBJECTMENU":["slime",null]},"shadow":true},"an":{"opcode":"event_broadcast","next":null,"parent":"o","inputs":{"BROADCAST_INPUT":[1,[11,"message1","BjUnhC4?F.GB{-[fpL+n"]]},"fields":{}}},"comments":{},"currentCostume":0,"costumes":[{"name":"costume1","bitmapResolution":1,"dataFormat":"svg","assetId":"9bede87262e1edb9327665c78dec432b","md5ext":"9bede87262e1edb9327665c78dec432b.svg","rotationCenterX":46.5,"rotationCenterY":109}],"sounds":[],"volume":100,"layerOrder":3,"visible":true,"x":198.99998963673977,"y":-49,"size":100,"direction":90,"draggable":false,"rotationStyle":"all around"},{"isStage":false,"name":"Sprite3","variables":{},"lists":{},"broadcasts":{},"blocks":{},"comments":{},"currentCostume":0,"costumes":[{"name":"costume1","bitmapResolution":1,"dataFormat":"svg","assetId":"78f1c8994065bafc771e04e2af4f7453","md5ext":"78f1c8994065bafc771e04e2af4f7453.svg","rotationCenterX":0,"rotationCenterY":0}],"sounds":[],"volume":100,"layerOrder":4,"visible":false,"x":-110.99999065399228,"y":-137,"size":100,"direction":90,"draggable":false,"rotationStyle":"all around"},{"isStage":false,"name":"Sprite4","variables":{},"lists":{},"broadcasts":{},"blocks":{"ap":{"opcode":"looks_hide","next":null,"parent":"aq","inputs":{},"fields":{}},"!":{"opcode":"looks_show","next":"#","parent":"ar","inputs":{},"fields":{}},"aq":{"opcode":"event_whenflagclicked","next":"ap","parent":null,"inputs":{},"fields":{},"topLevel":true},"ar":{"opcode":"event_whenbroadcastreceived","next":"!","parent":null,"inputs":{},"fields":{"BROADCAST_OPTION":["fff",":}_b$H_xUz^e9.7})P(J"]},"topLevel":true},"#":{"opcode":"control_wait","next":"p","parent":"!","inputs":{"DURATION":[1,[5,"5"]]},"fields":{}},"p":{"opcode":"speechSP_bubbleColor","next":"q","parent":"#","inputs":{"SPRITE":[1,"as"],"COLOR":[1,[9,"#055367"]]},"fields":{"TYPE":["background",null]}},"as":{"opcode":"speechSP_menu_TARGETS","next":null,"parent":"p","inputs":{},"fields":{"TARGETS":["_myself_",null]},"shadow":true},"q":{"opcode":"speechSP_bubbleColor","next":"b","parent":"p","inputs":{"SPRITE":[1,"at"],"COLOR":[1,[9,"#ffffff"]]},"fields":{"TYPE":["text",null]}},"at":{"opcode":"speechSP_menu_TARGETS","next":null,"parent":"q","inputs":{},"fields":{"TARGETS":["_myself_",null]},"shadow":true},"b":{"opcode":"speechSP_bubbleFont","next":"%","parent":"q","inputs":{"SPRITE":[1,"au"],"FONT":[1,"av"]},"fields":{}},"au":{"opcode":"speechSP_menu_TARGETS","next":null,"parent":"b","inputs":{},"fields":{"TARGETS":["_myself_",null]},"shadow":true},"av":{"opcode":"speechSP_menu_FONTS","next":null,"parent":"b","inputs":{},"fields":{"FONTS":["\"nintendoP_DotGothic12-M\", Pixel",null]},"shadow":true},"%":{"opcode":"speechSP_sayThis","next":null,"parent":"b","inputs":{"SPEECH":[1,[10,"I'm Gonna go to the past and ruin lives there!"]],"SPRITE":[1,"aw"]},"fields":{}},"aw":{"opcode":"speechSP_menu_TARGETS","next":null,"parent":"%","inputs":{},"fields":{"TARGETS":["_myself_",null]},"shadow":true}},"comments":{},"currentCostume":0,"costumes":[{"name":"costume1","bitmapResolution":1,"dataFormat":"svg","assetId":"1183d75414637c31f3f1a4807dd20a43","md5ext":"1183d75414637c31f3f1a4807dd20a43.svg","rotationCenterX":94.4263209592186,"rotationCenterY":126.718935}],"sounds":[],"volume":100,"layerOrder":5,"visible":true,"x":40.99999968210858,"y":-119,"size":100,"direction":90,"draggable":false,"rotationStyle":"all around"}],"monitors":[],"extensions":["SPscenes","text","speechSP"],"extensionURLs":{"SPscenes":"data:text/javascript;base64,Ly8gTmFtZTogU2NlbmVzCi8vIElEOiBTUHNjZW5lcwovLyBEZXNjcmlwdGlvbjogQ3JlYXRlIGFuZCBMb2FkIFNjZW5lcyBpbiB5b3VyIFByb2plY3QhCi8vIEJ5OiBTaGFya1Bvb2wKLy8gTGljZW5jZTogTUlUCgovLyBWZXJzaW9uIFYuMS4wLjAzCgooZnVuY3Rpb24gKFNjcmF0Y2gpIHsKICAidXNlIHN0cmljdCI7CiAgaWYgKCFTY3JhdGNoLmV4dGVuc2lvbnMudW5zYW5kYm94ZWQpIHRocm93IG5ldyBFcnJvcigiU2NlbmVzIG11c3QgcnVuIHVuc2FuZGJveGVkISIpOwoKICBjb25zdCBtZW51SWNvblVSSSA9CiJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSXhOekF1TlNJZ2FHVnBaMmgwUFNJeE56QXVOU0lnZG1sbGQwSnZlRDBpTUNBd0lERTNNQzQxSURFM01DNDFJajQ4WnlCemRISnZhMlV0YldsMFpYSnNhVzFwZEQwaU1UQWlQanh3WVhSb0lHUTlJazB3SURnMUxqSTFRekFnTXpndU1UWTRJRE00TGpFMk9DQXdJRGcxTGpJMUlEQnpPRFV1TWpVZ016Z3VNVFk0SURnMUxqSTFJRGcxTGpJMUxUTTRMakUyT0NBNE5TNHlOUzA0TlM0eU5TQTROUzR5TlZNd0lERXpNaTR6TXpJZ01DQTROUzR5TlNJZ1ptbHNiRDBpSTJJek1tSXlZaUl2UGp4d1lYUm9JR1E5SWsweE1DNHlOU0E0TlM0eU5XTXdMVFF4TGpReU1TQXpNeTQxTnprdE56VWdOelV0TnpWek56VWdNek11TlRjNUlEYzFJRGMxTFRNekxqVTNPU0EzTlMwM05TQTNOUzAzTlMwek15NDFOemt0TnpVdE56VWlJR1pwYkd3OUlpTm1ZVE5sTTJVaUx6NDhjR0YwYUNCa1BTSk5ORFV1TnpnMUlERXdNQzQ0TXpsakxUUXVNakk1SURBdE55NDJOalF0TXk0ME16Y3ROeTQyTmpRdE55NDJOalpXTlRJdU16VTRZekF0TkM0eU1qa2dNeTQwTXpVdE55NDJOallnTnk0Mk5qUXROeTQyTmpab05Ea3VPREl6WXpRdU1qSTVJREFnTnk0Mk5qUWdNeTQwTXpjZ055NDJOalFnTnk0Mk5qWjJOREF1T0RFMVl6QWdOQzR5TXkwekxqUXpOU0EzTGpZMk5pMDNMalkyTkNBM0xqWTJObm9pSUdacGJHdzlJaU5tWVRObE0yVWlMejQ4Y0dGMGFDQmtQU0pOTVRBMExqTTFJRGczTGpremRqTXVNRGswWXpBZ05pNHdNVGN0TkM0NE56Y2dNVEF1T0RrMUxURXdMamc1TlNBeE1DNDRPVFZvTFRRNExqQXhZVGd1TkRBMUlEZ3VOREExSURBZ01DQXhMVGd1TkRBekxUZ3VOREEzYkRFekxqSTVMVEV6TGprNVl6SXVNak0wTFRFdU9UY3lJRFl1TURZeExURXVOalExSURjdU9UYzBMams0Tld3ekxqWTBPQ0F6TGpjeU4yTXhMamt4TkNBeUxqWXpJRE11TURjNUxqTXlNaUExTGpZekxURXVOalZNT0RFdU1qUTNJRFkxTGpBeFlUVXVNamczSURVdU1qZzNJREFnTUNBeElEY3VNek0zTGpNek1td3hOUzQwTkRVZ01qSXVOVGczZWlJZ1ptbHNiRDBpSTJabVppSXZQanh3WVhSb0lHUTlJazB4TURRdU16VWdOVEl1TnpBM2RqTTVMakEyWVRrdU5qRTFJRGt1TmpFMUlEQWdNQ0F4TFRrdU5qSWdPUzQyTWtnME5pNDJOVGRoT1M0Mk1UVWdPUzQyTVRVZ01DQXdJREV0T1M0Mk1UVXRPUzQyTW5ZdE16Z3VORFpoT1M0Mk1UUWdPUzQyTVRRZ01DQXdJREVnT1M0Mk1UVXRPUzQyTVRSb05EZ3VNek0zWXprdU1qWXlMUzR3TXpjZ09TNHpOVEVnT1M0d01UUWdPUzR6TlRFZ09TNHdNVFI2SWlCbWFXeHNQU0p1YjI1bElpQnpkSEp2YTJVOUlpTm1abVlpSUhOMGNtOXJaUzEzYVdSMGFEMGlNUzQxSWlCemRISnZhMlV0YkdsdVpXTmhjRDBpY205MWJtUWlMejQ4Y0dGMGFDQmtQU0pOT1RVdU5UZ3hJREV3TVM0d056ZGhOeTQyTlRjZ055NDJOVGNnTUNBd0lEQWdOeTQyTlRjdE55NDJOVGRXTlRJdU5qUTNZVGN1TmpVM0lEY3VOalUzSURBZ01DQXdMVGN1TmpVM0xUY3VOalUzYUMwME9TNDNOMkUzTGpZMU55QTNMalkxTnlBd0lEQWdNQzAzTGpZMU5pQTNMalkxTjFZNU15NDBNbUUzTGpZMU55QTNMalkxTnlBd0lEQWdNQ0EzTGpZMU55QTNMalkxTjNwdExUVXdMams1T0NBeExqTTROV0U0TGpBek5TQTRMakF6TlNBd0lEQWdNUzA0TGpBek5TMDRMakF6TlZZMU1TNDJOR0U0TGpBek5TQTRMakF6TlNBd0lEQWdNU0E0TGpBek5TMDRMakF6TlVnNU5pNDRNV0U0TGpBek5TQTRMakF6TlNBd0lEQWdNU0E0TGpBek5TQTRMakF6TlhZME1pNDNPRGRoT0M0d016VWdPQzR3TXpVZ01DQXdJREV0T0M0d016VWdPQzR3TXpWNklpQm1hV3hzUFNJalptWm1JaUJ6ZEhKdmEyVTlJaU5tWm1ZaUlITjBjbTlyWlMxM2FXUjBhRDBpTXlJdlBqeHdZWFJvSUdROUlrMDNOQzQ0T1RJZ01USTFMakkzTW1NdE5DNHlNamtnTUMwM0xqWTJOQzB6TGpRek55MDNMalkyTkMwM0xqWTJOVlkzTmk0M09XTXdMVFF1TWpJNUlETXVORE0xTFRjdU5qWTJJRGN1TmpZMExUY3VOalkyYURRNUxqZ3lNMk0wTGpJeU9TQXdJRGN1TmpZMElETXVORE0zSURjdU5qWTBJRGN1TmpZMmRqUXdMamd4Tm1Nd0lEUXVNakk0TFRNdU5ETTFJRGN1TmpZMUxUY3VOalkwSURjdU5qWTFlaUlnWm1sc2JEMGlJMlpoTTJVelpTSXZQanh3WVhSb0lHUTlJazB4TXpNdU5EVTRJREV4TWk0ek5qTjJNeTR3T1RSak1DQTJMakF4TnkwMExqZzNPQ0F4TUM0NE9UVXRNVEF1T0RrMklERXdMamc1TldndE5EZ3VNREZoT0M0ME1EVWdPQzQwTURVZ01DQXdJREV0T0M0ME1ETXRPQzQwTURkc01UTXVNamc1TFRFekxqazVZekl1TWpNMUxURXVPVGN4SURZdU1EWXlMVEV1TmpRMUlEY3VPVGMxTGprNE5td3pMalkwT0NBekxqY3lObU14TGpreE5DQXlMall6SURNdU1EYzVMak15TWlBMUxqWXpMVEV1TmpWc01UTXVOall6TFRFM0xqVTNOR0UxTGpJNE55QTFMakk0TnlBd0lEQWdNU0EzTGpNek55NHpNekpzTVRVdU5EUTFJREl5TGpVNE9Ib2lJR1pwYkd3OUlpTm1abVlpTHo0OGNHRjBhQ0JrUFNKTk1UTXpMalExT0NBM055NHhOSFl6T1M0d05tRTVMall4TlNBNUxqWXhOU0F3SURBZ01TMDVMall5SURrdU5qSklOelV1TnpZMFlUa3VOakUxSURrdU5qRTFJREFnTUNBeExUa3VOakUxTFRrdU5qSldOemN1TnpReFl6QXROUzR6TURnZ05DNHpNREl0T1M0Mk1UVWdPUzQyTVRVdE9TNDJNVFZvTkRndU16TTNZemt1TWpZeUxTNHdNemNnT1M0ek5URWdPUzR3TVRRZ09TNHpOVEVnT1M0d01UUjZJaUJtYVd4c1BTSnViMjVsSWlCemRISnZhMlU5SWlObVptWWlJSE4wY205clpTMTNhV1IwYUQwaU1TNDFJaUJ6ZEhKdmEyVXRiR2x1WldOaGNEMGljbTkxYm1RaUx6NDhjR0YwYUNCa1BTSk5NVEkwTGpZNE9DQXhNalV1TlRGaE55NDJOVGNnTnk0Mk5UY2dNQ0F3SURBZ055NDJOVGN0Tnk0Mk5UZFdOemN1TURoaE55NDJOVGNnTnk0Mk5UY2dNQ0F3SURBdE55NDJOVGN0Tnk0Mk5UZG9MVFE1TGpjM1lUY3VOalUzSURjdU5qVTNJREFnTUNBd0xUY3VOalUySURjdU5qVTNkalF3TGpjM00yRTNMalkxTnlBM0xqWTFOeUF3SURBZ01DQTNMalkxTnlBM0xqWTFOM3B0TFRVd0xqazVPQ0F4TGpNNE5XRTRMakF6TlNBNExqQXpOU0F3SURBZ01TMDRMakF6TlMwNExqQXpOVlkzTmk0d056TmhPQzR3TXpVZ09DNHdNelVnTUNBd0lERWdPQzR3TXpVdE9DNHdNelZvTlRJdU1qSTNZVGd1TURNMUlEZ3VNRE0xSURBZ01DQXhJRGd1TURNMUlEZ3VNRE0xZGpReUxqYzROMkU0TGpBek5TQTRMakF6TlNBd0lEQWdNUzA0TGpBek5TQTRMakF6TlhvaUlHWnBiR3c5SWlObVptWWlJSE4wY205clpUMGlJMlptWmlJZ2MzUnliMnRsTFhkcFpIUm9QU0l6SWk4K1BDOW5Qand2YzNablBnPT0iOwoKICBjb25zdCBzY2VuZVNWRyA9CmA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE4LjMzMSIgaGVpZ2h0PSIxOC4zMzEiIHZpZXdCb3g9IjAgMCAxOC4zMzEgMTguMzMxIj48ZyBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiPjxwYXRoIGQ9Ik0xNS41NSAxMi4wODV2LjU4N2EyLjA2NyAyLjA2NyAwIDAgMS0yLjA2NyAyLjA2N0g0LjM3NWMtLjg4IDAtMS41OTQtLjcxNC0xLjU5NC0xLjU5NWgwbDIuNTIxLTIuNjU0Yy40MjQtLjM3NCAxLjE1LS4zMTIgMS41MTMuMTg3bC42OTIuNzA3Yy4zNjMuNDk5LjU4NC4wNjEgMS4wNjgtLjMxM2wyLjU5Mi0zLjMzNGExLjAwMyAxLjAwMyAwIDAgMSAxLjM5Mi4wNjNsMi45MyA0LjI4NXoiIGZpbGw9IiNDT0xPUiIgc3Ryb2tlPSIjQ09MT1IiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48cGF0aCBkPSJNMTUuNTUgNS40MDN2Ny40MWExLjgyNCAxLjgyNCAwIDAgMS0xLjgyNSAxLjgyNWgtOS4xMmExLjgyNCAxLjgyNCAwIDAgMS0xLjgyNC0xLjgyNVY1LjUxN2MwLTEuMDA3LjgxNi0xLjgyNCAxLjgyNC0xLjgyNGg5LjE3YzEuNzU3LS4wMDcgMS43NzQgMS43MSAxLjc3NCAxLjcxeiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQ09MT1IiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMCAxOC4zMzFWMGgxOC4zMzF2MTguMzMxeiIgZmlsbD0ibm9uZSIvPjwvZz48L3N2Zz5gOwogIGNvbnN0IGRlZmF1bHRTY2VuZVRodW1iID0KImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjJaWEp6YVc5dVBTSXhMakVpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUlnZUcxc2JuTTZlR3hwYm1zOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6RTVPVGt2ZUd4cGJtc2lJSGRwWkhSb1BTSTBPREF1TURBd01ERWlJR2hsYVdkb2REMGlNell3SWlCMmFXVjNRbTk0UFNJd0xEQXNORGd3TGpBd01EQXhMRE0yTUNJK1BHY2djM1J5YjJ0bExXMXBkR1Z5YkdsdGFYUTlJakV3SWo0OGNHRjBhQ0JrUFNKTk1Dd3pOakIyTFRNMk1HZzBPREIyTXpZd2VpSWdabWxzYkQwaUl6bGhPV0U1WVNJZ2MzUnliMnRsUFNKdWIyNWxJaUJ6ZEhKdmEyVXRkMmxrZEdnOUlqQWlMejQ4Y0dGMGFDQmtQU0pOTUN3ek5qQnNNQzR5TVRBeU5pd3ROVEF1TWpFNE1Xd3hNakV1TkRJd016Y3NMVEV6Tmk0MU9UVTNNV3czT1M0eU1ETXdOeXcyTkM0Mk56TXpOV3d4TkRRdU56QXpNVEVzTFRFMU1DNDBPVEExYkRFek5DNHlNemM0TWl3eE5ETXVOell6TnpSc01DNHlNalV6T0N3eE1qZ3VPRFkzTWpKNklpQm1hV3hzUFNJak5HVTBaVFJsSWlCemRISnZhMlU5SW01dmJtVWlJSE4wY205clpTMTNhV1IwYUQwaU1DSXZQanh3WVhSb0lHUTlJazB5TlM0MU5EQTFOQ3czT1M0NE56WTFObU13TEMwek1DNHlOamM0TmlBeU5DNDFNelk1TkN3dE5UUXVPREEwT0NBMU5DNDRNRFE0TEMwMU5DNDRNRFE0WXpNd0xqSTJOemcyTERBZ05UUXVPREEwT0RFc01qUXVOVE0yT1RRZ05UUXVPREEwT0RFc05UUXVPREEwT0dNd0xETXdMakkyTnpnMklDMHlOQzQxTXpZNU5TdzFOQzQ0TURRNE1TQXROVFF1T0RBME9DdzFOQzQ0TURRNE1XTXRNekF1TWpZM09EWXNNQ0F0TlRRdU9EQTBPQ3d0TWpRdU5UTTJPVFVnTFRVMExqZ3dORGdzTFRVMExqZ3dORGd4ZWlJZ1ptbHNiRDBpSXpSbE5HVTBaU0lnYzNSeWIydGxQU0p1YjI1bElpQnpkSEp2YTJVdGQybGtkR2c5SWpBaUx6NDhaeUJtYVd4c1BTSnViMjVsSWlCemRISnZhMlU5SWlNNVlUbGhPV0VpSUhOMGNtOXJaUzEzYVdSMGFEMGlNakl1TlNJK1BIQmhkR2dnWkQwaVRUSTFOQzQ0TXpFMkxESXdNUzQxTURFM05HTXhNaTQyTlRFMk9Dd3hNaTQyTlRFMk9DQTJNeTQwTkRVd05TdzJNeTQwTkRVd05TQTJNeTQwTkRVd05TdzJNeTQwTkRVd05XTXlMakk1TnpreExESXVNamszT1RFZ01pNHlPVGM1TVN3MkxqQXpNREUzSURBc09DNHpNamd3T0dNdE1TNHhOVEV6TlN3eExqRTBOalUxSUMweUxqWTFOemN4TERFdU56STNNREVnTFRRdU1UWTBNRFVzTVM0M01qY3dNV2d3TGpBd01EQXlZeTB4TGpVd05qTTJMREFnTFRNdU1ERXlOekVzTFRBdU5UYzFOallnTFRRdU1UWTBNRFVzTFRFdU56SXlNakZqTUN3d0lDMDFNUzQ1TVRBd05Dd3ROVEV1T1RFeE56UWdMVFkwTGpFeE16QTNMQzAyTkM0eE1UVXhOeUl2UGp4d1lYUm9JR1E5SWsweU9UVXVORFl3Tnprc01qRTRMak01TmpJNVl6QXNNVGN1T0RnNU1EZ2dMVEUwTGpVd05qazRMRE15TGpNNU5qQTBJQzB6TWk0ek9UWXdOQ3d6TWk0ek9UWXdOR010TVRZdU5qRTJMREFnTFRNd0xqTXhMQzB4TWk0MU1UVTJOU0F0TXpJdU1UYzBPVElzTFRJNExqWXpNakU1WXkwd0xqQXhNak15TEMwd0xqRXdOalF6SURFdU5UYzFOVGdzTFRFd0xqWTNPRFkwSURBdU56a3lNemdzTFRFeExqVXdNekF6WXkwd0xqZ3hOemszTEMwd0xqZzJNRGs0SUMwMExqQXdOalk1TERndU1ESTFOallnTFRNdU9USTVNVE1zTnk0NU56STROR00wTGpFME9UYzJMQzB5TGpneU5qRXlJREUyTGpVMk5ESTRMQzB4TVM0NU9Ea3dNeUF5TWk0ME16STRNaXd0TVRjdU56ZzFORFZqTmk0NU1UazBNeXd0Tmk0NE16UTBJREUwTGpFek1qRTVMQzB4T0M0NE1EazFOaUF4TkM0eE56Z3dNaXd0TVRndU5qUXlOak5qTUM0d056azJOaXd3TGpJNU1ERTVJQzB4TGpRNU5EYzBMREl1TkRjME9UUWdMVEF1T1RFek9USXNNeTQwTmpjeE0yTXdMalU1TVRFNExERXVNREE1T0RnZ015NHlOakEyTlN3d0xqVXpOell6SURNdU5UVTFNekVzTUM0MU56TXpPR014Tmk0d016RXlNeXd4TGprME5EYzVJREk0TGpRMU5UUTVMREUxTGpZd016RXpJREk0TGpRMU5UUTVMRE15TGpFMU16a3hlaUl2UGp3dlp6NDhaeUJ6ZEhKdmEyVTlJbTV2Ym1VaUlITjBjbTlyWlMxM2FXUjBhRDBpTVNJK1BIQmhkR2dnWkQwaVRUTXdPUzQ1TkRnMU55d3lOek11TWpjNU5qZGpNQ3d3SUMwMk1DNDFPVEk0TVN3dE5qQXVOVGswT0NBdE5qa3VPVFEyTXpFc0xUWTVMamswT0RaakxUSXVNelEyT1RRc0xUSXVNelEzTURJZ05DNDRNRGN3Tnl3dE1URXVPRFV4TmlBMkxqWTJNalkzTEMwNUxqazVObU00TGpVeU9UazJMRGd1TlRJNU9UWWdOekV1TmpFeE56SXNOekV1TmpFeE56SWdOekV1TmpFeE56SXNOekV1TmpFeE56SmpNaTR5T1RjNU1Td3lMakk1TnpreElESXVNamszT1RFc05pNHdNekF4TnlBd0xEZ3VNekk0TURoakxURXVNVFV4TXpRc01TNHhORFkxTlNBdE1pNDJOVGMzTERFdU56STNNREVnTFRRdU1UWTBNRE1zTVM0M01qY3dNV2d0TUM0d01EQXdNbU10TVM0MU1EWXpOU3d3SUMwekxqQXhNalk1TEMwd0xqVTNOVFkzSUMwMExqRTJOREF6TEMweExqY3lNakl4ZWlJZ1ptbHNiRDBpSXpSbE5HVTBaU0l2UGp4d1lYUm9JR1E5SWlJZ1ptbHNiRDBpSXpWa00yVTVZaUl2UGp4d1lYUm9JR1E5SWlJZ1ptbHNiRDBpSXpWa00yVTVZaUl2UGp4d1lYUm9JR1E5SWlJZ1ptbHNiRDBpSXpWa00yVTVZaUl2UGp4d1lYUm9JR1E5SWsweU5Ua3VNall3TnpVc01Ua3dMakUzT1RVeVl5MHpMamt4T1RNMkxERTJMalU1T0RJMElDMHhPUzQ1TlRreE15d3lOeTR4TnpFeU9TQXRNell1TlRNeU9EVXNNalF1TlRVNU16VmpNQzQ0TURBM015d3RNUzR4TXpneE5TQXpOaTQzT1RFNU15d3RNemd1TkRBek9ETWdNell1T1RnMU5qVXNMVE0zTGpJeE9USTRZekF1TmpZNE56UXNOQzR3T0Rrek5TQXdMalUxT0RnMExEZ3VNemMxTnpNZ0xUQXVORFV5T0N3eE1pNDJOVGs1TTNvaUlHWnBiR3c5SWlNMFpUUmxOR1VpTHo0OGNHRjBhQ0JrUFNJaUlHWnBiR3c5SWlNMVpETmxPV0lpTHo0OGNHRjBhQ0JrUFNKTk1qazFMalEyTURjNUxESXhPQzR3TmpJNU5XTXdMREUzTGpnNE9UQTRJQzB4TkM0MU1EWTVPQ3d6TWk0ek9UWXdOQ0F0TXpJdU16azJNRFFzTXpJdU16azJNRFJqTFRFM0xqZzRPVEE0TERBZ0xUTXlMak01TVRJMkxDMHhOQzQxTURZNU9DQXRNekl1TXpreE1qWXNMVE15TGpNNU5qQTBZekFzTFRFM0xqZzRPVEE0SURFMExqVXdNakU0TEMwek1pNHpPVEV5TmlBek1pNHpPVEV5Tml3dE16SXVNemt4TWpaak1UY3VPRGc1TURnc01DQXpNaTR6T1RZd05Dd3hOQzQxTURZNU9DQXpNaTR6T1RZd05Dd3pNaTR6T1RFeU5ub2lJR1pwYkd3OUlpTTBaVFJsTkdVaUx6NDhMMmMrUEdjZ1ptbHNiRDBpYm05dVpTSWdjM1J5YjJ0bFBTSWpOR1UwWlRSbElpQnpkSEp2YTJVdGQybGtkR2c5SWpJeUxqVWlQanh3WVhSb0lHUTlJazB5TkRFdU1ESXhORFVzTWpBMExqTTFNRE5zTFRjNExqQTJOak01TEMwM09DNHdOamc1TkdNdE1pNHlPVGM1TVN3dE1pNHlPVGM1TVNBdE1pNHlPVGM1TVN3dE5pNHdNekF4TnlBd0xDMDRMak15T0RBNFl6SXVNamszT1RFc0xUSXVNamszT1RFZ05pNHdNekF4Tnl3dE1pNHlPVGM1TVNBNExqTXlPREE0TERCc056Y3VOalV3T1RRc056Y3VOalV3T1RRaUx6NDhjR0YwYUNCa1BTSk5NakkwTGpjNE1qUXpMREUwTnk0ek9Ea3pPR013TERFM0xqZzRPVEE0SUMweE5DNDFNREl4T0N3ek1pNHpPVEV5TmlBdE16SXVNemt4TWpZc016SXVNemt4TWpaakxURTNMamc0T1RBNExEQWdMVE15TGpNNU1USTJMQzB4TkM0MU1ESXhPQ0F0TXpJdU16a3hNallzTFRNeUxqTTVNVEkyWXpBc0xURTNMamc0T1RBNElERTBMalV3TWpFNExDMHpNaTR6T1RFeU5pQXpNaTR6T1RFeU5pd3RNekl1TXpreE1qWmpNVGN1T0RnNU1EZ3NNQ0F6TWk0ek9URXlOaXd4TkM0MU1ESXhPQ0F6TWk0ek9URXlOaXd6TWk0ek9URXlObm9pTHo0OGNHRjBhQ0JrUFNKTk1qSXdMakk1TWpVMExESXhOQzR5TlRrNU0yTXRNVGN1TkRFd05Dd3ROQzR4TVRFeE5DQXRNamd1TVRreE5UVXNMVEl4TGpVMU56Z3hJQzB5TkM0d09EQXpPU3d0TXpndU9UWTRNbU0wTGpFeE1URTBMQzB4Tnk0ME1UQTBJREl4TGpVMU56Z3hMQzB5T0M0eE9URTFOU0F6T0M0NU5qZ3hPU3d0TWpRdU1EZ3dNemxqTVRJdU16TTNNelVzTWk0NU1UTXlNeUF5TVM0ek5EVTROeXd4TWk0MU1qSTNPU0F5TkM0d09EVXpOU3d5TkM0d056QTJJaTgrUEhCaGRHZ2daRDBpVFRJek1DNDVNekl4TXl3eU1UTXVPVFV3TVRaak1TNDFOalF5TlN3dE1USXVNelEwTXpVZ01UQXVNRGMyTWpRc0xUSXlMalV5TWpBMElESXhMalE1TXpZMExDMHlOaTQwT1RBM05DSXZQand2Wno0OFp5QnpkSEp2YTJVOUltNXZibVVpSUhOMGNtOXJaUzEzYVdSMGFEMGlNU0krUEhCaGRHZ2daRDBpVFRFMk1pNDVOVFV3TlN3eE1qWXVNamd4TXpWakxUSXVNamszT1RFc0xUSXVNamszT1RFZ0xUSXVNamszT1RFc0xUWXVNRE13TVRjZ01Dd3RPQzR6TWpnd09HTXlMakk1TnpreExDMHlMakk1TnpreElEWXVNRE13TVRjc0xUSXVNamszT1RFZ09DNHpNamd3T0N3d1l6QXNNQ0EyTUM0ek5EVTROU3cyTUM0ek5EVTROU0EzTVM0eU9ERTRMRGN4TGpJNE1UaGpNeTR5TmpnNU5Td3pMakkyT0RrMUlDMDBMams0TXpZc01URXVOamMwT1RrZ0xUZ3VOVEk1TWpNc09DNHhNamt5TldNdE1URXVNekE1T1Rrc0xURXhMak14TURNMklDMDNNUzR3T0RBMk5Td3ROekV1TURneU9UY2dMVGN4TGpBNE1EWTFMQzAzTVM0d09ESTVOM29pSUdacGJHdzlJaU01WVRsaE9XRWlMejQ4Y0dGMGFDQmtQU0lpSUdacGJHdzlJaU01T1RZMlptWWlMejQ4Y0dGMGFDQmtQU0pOTWpJMExqYzRNalF6TERFME55NHpPRGt6T0dNd0xERTNMamc0T1RBNElDMHhOQzQxTURJeE9Dd3pNaTR6T1RFeU5pQXRNekl1TXpreE1qWXNNekl1TXpreE1qWmpMVEUzTGpnNE9UQTRMREFnTFRNeUxqTTVNVEkyTEMweE5DNDFNREl4T0NBdE16SXVNemt4TWpZc0xUTXlMak01TVRJMll6QXNMVEUzTGpnNE9UQTRJREUwTGpVd01qRTRMQzB6TWk0ek9URXlOaUF6TWk0ek9URXlOaXd0TXpJdU16a3hNalpqTVRjdU9EZzVNRGdzTUNBek1pNHpPVEV5Tml3eE5DNDFNREl4T0NBek1pNHpPVEV5Tml3ek1pNHpPVEV5Tm5vaUlHWnBiR3c5SWlNNVlUbGhPV0VpTHo0OGNHRjBhQ0JrUFNKTk1qSXdMakk1TWpVMUxESXhOQzR5TlRrNU1tTXRNVGN1TkRFd05Dd3ROQzR4TVRFeE5DQXRNamd1TVRreE5UVXNMVEl4TGpVMU56Z3hJQzB5TkM0d09EQTBMQzB6T0M0NU5qZ3lZelF1TVRFeE1UUXNMVEUzTGpReE1EUWdNakV1TlRVM09ERXNMVEk0TGpFNU1UVTFJRE00TGprMk9ESXNMVEkwTGpBNE1EUmpNVE11TlRrMk56RXNNeTR5TVRBMklESXpMakUxTURNeUxERTBMalUxTkRNNUlESTBMamN5TlRFNExESTNMalkyTWpRMFl5MHlMamcxTnpZekxESXVORGt5T0RJZ0xUTTBMamd3T0RRNExETTJMakl5TWpZZ0xUTTJMamsxTmpJNUxETTFMamc1T1RJeVl5MHdMamc0TkRRNUxDMHdMakV6TXpFM0lDMHhMamMzTURZekxDMHdMak13TXpneklDMHlMalkxTmpZNUxDMHdMalV4TXpBMmVpSWdabWxzYkQwaUl6bGhPV0U1WVNJdlBqeHdZWFJvSUdROUlpSWdabWxzYkQwaUl6azVOalptWmlJdlBqd3ZaejQ4TDJjK1BDOXpkbWMrIjsKCiAgY29uc3Qgdm0gPSBTY3JhdGNoLnZtOwogIGNvbnN0IHJ1bnRpbWUgPSB2bS5ydW50aW1lOwogIGNvbnN0IHJlbmRlciA9IHZtLnJlbmRlcmVyOwogIGNvbnN0IGlzUE0gPSBTY3JhdGNoLmV4dGVuc2lvbnMuaXNQZW5ndWluTW9kOwogIGNvbnN0IGlzRWRpdG9yID0gdHlwZW9mIHNjYWZmb2xkaW5nID09PSAidW5kZWZpbmVkIjsKCiAgbGV0IHRoaXNTY2VuZSA9ICIiOwogIGxldCBzY2VuZXMgPSB7fTsKICBsZXQgc2NlbmVUaHVtYnMgPSB7fTsKCiAgLy8gY3VzdG9tIEdVSQogIGxldCBndWlFbGVtZW50cyA9IHt9OwoKICBmdW5jdGlvbiBvcGVuTW9kYWwodGl0bGVOYW1lLCBmdW5jKSB7CiAgICAvLyBpbiBhIEJ1dHRvbiBDb250ZXh0LCBTY3JhdGNoQmxvY2tzIGFsd2F5cyBleGlzdHMKICAgIFNjcmF0Y2hCbG9ja3MucHJvbXB0KAogICAgICB0aXRsZU5hbWUsCiAgICAgICIiLAogICAgICAodmFsdWUpID0+IGZ1bmModmFsdWUpLAogICAgICAiU2NlbmUgTWFuYWdlciIsCiAgICAgICJicm9hZGNhc3RfbXNnIgogICAgKTsKICB9CgogIGZ1bmN0aW9uIGF0dGFjaFRhYigpIHsKICAgIGNvbnN0IHRhYnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBsaVtjbGFzcyo9InJlYWN0LXRhYnNfcmVhY3QtdGFic19fdGFiIl1gKTsKICAgIGNvbnN0IGxhc3RUYWIgPSB0YWJzW3RhYnMubGVuZ3RoIC0gMV07CiAgICBjb25zdCBjbG9uZVRhYiA9IGxhc3RUYWIuY2xvbmVOb2RlKHRydWUpOwogICAgbGFzdFRhYi5pbnNlcnRBZGphY2VudEVsZW1lbnQoImFmdGVyZW5kIiwgY2xvbmVUYWIpOwoKICAgIGNvbnN0IGNoaWxkcyA9IGlzUE0gPyBjbG9uZVRhYi5maXJzdENoaWxkLmNoaWxkcmVuIDogY2xvbmVUYWIuY2hpbGRyZW47CiAgICBjaGlsZHNbMF0uc3JjID0gY29uc3RydWN0VGFiSU1HKCk7CiAgICBjaGlsZHNbMV0udGV4dENvbnRlbnQgPSAiU2NlbmVzIjsKICAgIGd1aUVsZW1lbnRzWyJjbG9uZVRhYiJdID0geyBjbG9uZVRhYiwgaW1nOiBjaGlsZHNbMF0gfTsKICAgIGNsb25lVGFiLnNldEF0dHJpYnV0ZSgic3R5bGUiLCAiZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7Iik7CiAgICBjbG9uZVRhYi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIChlKSA9PiB7CiAgICAgIFJlZHV4U3RvcmUuZGlzcGF0Y2goewogICAgICAgIHR5cGU6ICJzY3JhdGNoLWd1aS9uYXZpZ2F0aW9uL0FDVElWQVRFX1RBQiIsIGFjdGl2ZVRhYkluZGV4OiAtMQogICAgICB9KTsKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gc3RhcnRMaXN0ZW5lcldvcmtlcigpIHsKICAgIGNvbnN0IGNoZWNrSW5FZGl0b3IgPSAoKSA9PiAhUmVkdXhTdG9yZS5nZXRTdGF0ZSgpLnNjcmF0Y2hHdWkubW9kZS5pc1BsYXllck9ubHk7CiAgICBsZXQgaW5FZGl0b3IgPSBjaGVja0luRWRpdG9yKCk7CiAgICBpZiAoaW5FZGl0b3IpIGF0dGFjaFRhYigpOwogICAgUmVkdXhTdG9yZS5zdWJzY3JpYmUoKCkgPT4gewogICAgICBjb25zdCBjdXJyZW50bHlJbkVkaXRvciA9IGNoZWNrSW5FZGl0b3IoKTsKICAgICAgaWYgKGluRWRpdG9yICE9PSBjdXJyZW50bHlJbkVkaXRvcikgewogICAgICAgIGluRWRpdG9yID0gY3VycmVudGx5SW5FZGl0b3I7CiAgICAgICAgaWYgKGluRWRpdG9yKSB2bS5vbmNlKCJ3b3Jrc3BhY2VVcGRhdGUiLCAoKSA9PiBhdHRhY2hUYWIoKSk7CiAgICAgIH0KICAgICAgaWYgKGN1cnJlbnRseUluRWRpdG9yKSB7CiAgICAgICAgaWYgKGd1aUVsZW1lbnRzWyJjbG9uZVRhYiJdKSB7CiAgICAgICAgICBjb25zdCB0aGlzVGFiID0gUmVkdXhTdG9yZS5nZXRTdGF0ZSgpLnNjcmF0Y2hHdWkuZWRpdG9yVGFiLmFjdGl2ZVRhYkluZGV4OwogICAgICAgICAgY29uc3QgdGFiSW1nID0gZ3VpRWxlbWVudHNbImNsb25lVGFiIl0uaW1nOwogICAgICAgICAgdGFiSW1nLnNyYyA9IGNvbnN0cnVjdFRhYklNRygpOwogICAgICAgICAgaWYgKHRoaXNUYWIgPT09IC0xKSB7CiAgICAgICAgICAgIGd1aUVsZW1lbnRzWyJjbG9uZVRhYiJdLmNsb25lVGFiLnN0eWxlLmhlaWdodCA9ICJjYWxjKDEwMCUgLSAxNSUpIjsKICAgICAgICAgICAgdGFiSW1nLnN0eWxlLmZpbHRlciA9ICJzYXR1cmF0ZSgxKSI7CiAgICAgICAgICAgIGd1aUVsZW1lbnRzWyJtYW5hZ2VyIl0/LnJlbW92ZSgpOwogICAgICAgICAgICBvcGVuU2NlbmVUYWIoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGd1aUVsZW1lbnRzWyJjbG9uZVRhYiJdLmNsb25lVGFiLnN0eWxlLmhlaWdodCA9ICJjYWxjKDEwMCUgLSAyMCUpIjsKICAgICAgICAgICAgdGFiSW1nLnN0eWxlLmZpbHRlciA9ICIiOwogICAgICAgICAgICBndWlFbGVtZW50c1sibWFuYWdlciJdPy5yZW1vdmUoKTsKICAgICAgICAgICAgZGVsZXRlIGd1aUVsZW1lbnRzWyJtYW5hZ2VyIl07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9CiAgaWYgKGlzRWRpdG9yKSBzdGFydExpc3RlbmVyV29ya2VyKCk7CgogIGZ1bmN0aW9uIG9wZW5TY2VuZVRhYigpIHsKICAgIGNvbnN0IHRoZW1lID0gewogICAgICBtYWluOiBpc1BNID8gIiMwMGMzZmYiIDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLmdldFByb3BlcnR5VmFsdWUoIi0tbG9va3Mtc2Vjb25kYXJ5IikgfHwgIiNmZjRjNGMiLAogICAgICBmYWRlOiBpc1BNID8gImhzbGEoMTk0LDEwMCUsNTAlLDAuMzUpIiA6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCItLWxvb2tzLXRyYW5zcGFyZW50IikgfHwgIiNmZjRkNGQ1OSIKICAgIH07CgogICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgic2NlbmUtbWFuYWdlciIpOwogICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgic3R5bGUiLCAiaGVpZ2h0OiA5NSU7Iik7CgogICAgY29uc3QgaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIGlubmVyLmNsYXNzTGlzdC5hZGQoIm1hbmFnZXItaW5uZXIiKTsKICAgIGlubmVyLnNldEF0dHJpYnV0ZSgic3R5bGUiLCAiaGVpZ2h0OiAxMDAlOyBvdmVyZmxvdy15OiBhdXRvOyBtYXJnaW46IDAgMTVweCAxNXB4IDE1cHg7IGRpc3BsYXk6IGZsZXg7IGZsZXgtd3JhcDogd3JhcDsgYWxpZ24tY29udGVudDogZmxleC1zdGFydDsgYWxpZ24taXRlbXM6IHN0cmV0Y2g7IGJvcmRlcjogZ3JleSBzb2xpZCAxcHg7IGJvcmRlci1yYWRpdXM6IDAgMTBweCAxMHB4IDA7Iik7CiAgICBPYmplY3QuZW50cmllcyhzY2VuZVRodW1icykuZm9yRWFjaCgoaXRlbSkgPT4gaW5uZXIuYXBwZW5kQ2hpbGQoZ2VuR1VJVGh1bWIoaXRlbSwgdGhlbWUpKSk7CgogICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGlubmVyKTsKICAgIGNvbnN0IGd1aVNwYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgZGl2W2NsYXNzXj0iZ3VpX3RhYnNfIl1gKS5maXJzdENoaWxkOwogICAgZ3VpU3BhY2UuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCJhZnRlcmVuZCIsIGNvbnRhaW5lcik7CiAgICBndWlFbGVtZW50c1sibWFuYWdlciJdID0gY29udGFpbmVyOwogIH0KCiAgZnVuY3Rpb24gY29uc3RydWN0VGFiSU1HKCkgewogICAgY29uc3QgdGhlbWUgPSBpc1BNID8gIiMwMGMzZmYiIDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLmdldFByb3BlcnR5VmFsdWUoIi0tbG9va3Mtc2Vjb25kYXJ5IikgfHwgIiNmZjRjNGMiOwogICAgcmV0dXJuIGBkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LCR7YnRvYShzY2VuZVNWRy5yZXBsYWNlQWxsKCIjQ09MT1IiLCB0aGVtZSkpfWA7CiAgfQoKICBmdW5jdGlvbiBnZW5HVUlUaHVtYihzY2VuZUluZm8sIHRoZW1lKSB7CiAgICBjb25zdCB0aHVtYkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgaWYgKHRoaXNTY2VuZSA9PT0gc2NlbmVJbmZvWzBdKSB7CiAgICAgIHRodW1iRGl2LnNldEF0dHJpYnV0ZSgic3R5bGUiLCBgd2lkdGg6IDIyLjUlOyBoZWlnaHQ6IG1heC1jb250ZW50OyBwYWRkaW5nOiA0cHg7IG1hcmdpbjogMS4yJTsgYmFja2dyb3VuZDogJHt0aGVtZS5tYWlufTsgYm9yZGVyLXJhZGl1czogMTVweDsgY3Vyc29yOiBwb2ludGVyOyB0cmFuc2l0aW9uOiBib3gtc2hhZG93IDIwMG1zIGVhc2UtaW4tb3V0O2ApOwogICAgICB0aHVtYkRpdi5zdHlsZS5ib3hTaGFkb3cgPSBgJHt0aGVtZS5mYWRlfSAwcHggMHB4IDBweCA1cHhgOwogICAgfSBlbHNlIHsKICAgICAgdGh1bWJEaXYuc2V0QXR0cmlidXRlKCJzdHlsZSIsIGB3aWR0aDogMjIuNSU7IGhlaWdodDogbWF4LWNvbnRlbnQ7IHBhZGRpbmc6IDRweDsgbWFyZ2luOiAxLjIlOyBib3JkZXI6IHNvbGlkIGdyZXkgMnB4OyBib3JkZXItcmFkaXVzOiAxNXB4OyBjdXJzb3I6IHBvaW50ZXI7IHRyYW5zaXRpb246IGJveC1zaGFkb3cgMjAwbXMgZWFzZS1pbi1vdXQ7YCk7CiAgICB9CgogICAgY29uc3QgdGh1bWJJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKICAgIHRodW1iSW1nLnNldEF0dHJpYnV0ZSgic3R5bGUiLCAiYm9yZGVyLXJhZGl1czogMTBweCAxMHB4IDAgMDsgd2lkdGg6IDEwMCU7Iik7CiAgICB0aHVtYkltZy5zcmMgPSBzY2VuZUluZm9bMV0uaW1nOwogICAgdGh1bWJEaXYuYXBwZW5kQ2hpbGQodGh1bWJJbWcpOwoKICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICB0aXRsZS5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgIndpZHRoOiAxMDAlOyBwYWRkaW5nOiAwIDVweCA1cHggNXB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyB3aGl0ZS1zcGFjZTogbm93cmFwOyBvdmVyZmxvdzogaGlkZGVuOyIpOwogICAgdGl0bGUudGV4dENvbnRlbnQgPSBzY2VuZUluZm9bMF07CgogICAgdGh1bWJEaXYuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VsZWF2ZSIsICgpID0+IHsgdGh1bWJEaXYuc3R5bGUuYm94U2hhZG93ID0gIiIgfSk7CiAgICB0aHVtYkRpdi5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWVudGVyIiwgKCkgPT4geyB0aHVtYkRpdi5zdHlsZS5ib3hTaGFkb3cgPSBgJHt0aGVtZS5mYWRlfSAwcHggMHB4IDBweCA1cHhgIH0pOwogICAgdGh1bWJEaXYuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoZSkgPT4gewogICAgICBydW50aW1lLmdldE9wY29kZUZ1bmN0aW9uKCJTUHNjZW5lc19zd2l0Y2hTY2VuZSIpKHsgTkFNRTogc2NlbmVJbmZvWzBdIH0pOwogICAgICBpZiAoc2NlbmVJbmZvWzFdLmlzRGVmYXVsdCkgcnVudGltZS5vbmNlKCJCRUZPUkVfRVhFQ1VURSIsIGFzeW5jICgpID0+IHsKICAgICAgICBzY2VuZUluZm9bMV0uaXNEZWZhdWx0ID0gZmFsc2U7CiAgICAgICAgc2NlbmVJbmZvWzFdLmltZyA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgICByZW5kZXIucmVxdWVzdFNuYXBzaG90KCh1cmkpID0+IHsKICAgICAgICAgICAgdGh1bWJJbWcuc3JjID0gdXJpOwogICAgICAgICAgICByZXNvbHZlKHVyaSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICB9KTsKICAgIHRodW1iRGl2LmFwcGVuZCh0aHVtYkltZywgdGl0bGUpOwogICAgcmV0dXJuIHRodW1iRGl2OwogIH0KCiAgLy8gVHVyYm93YXJwIFN0b3JhZ2UKICBpZiAoIWlzUE0pIHsKICAgIHJ1bnRpbWUub24oIlBST0pFQ1RfTE9BREVEIiwgKCkgPT4gewogICAgICBjb25zdCBzdG9yZWQgPSBydW50aW1lLmV4dGVuc2lvblN0b3JhZ2VbIlNQc2NlbmVzIl07CiAgICAgIGlmIChzdG9yZWQpIHsKICAgICAgICBzY2VuZXMgPSBzdG9yZWQuc2NlbmVzOwogICAgICAgIGlmIChpc0VkaXRvcikgT2JqZWN0LmtleXMoc2NlbmVzKS5mb3JFYWNoKChuYW1lKSA9PiB7CiAgICAgICAgICBzY2VuZVRodW1ic1tuYW1lXSA9IHsgaXNEZWZhdWx0OiB0cnVlLCBpbWc6IGRlZmF1bHRTY2VuZVRodW1iIH07CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgY2xhc3MgU1BzY2VuZXMgewogICAgZ2V0SW5mbygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZDogIlNQc2NlbmVzIiwKICAgICAgICBuYW1lOiAiU2NlbmVzIiwKICAgICAgICBjb2xvcjE6ICIjZmEzZTNlIiwKICAgICAgICBjb2xvcjI6ICIjZDQzMzMzIiwKICAgICAgICBjb2xvcjM6ICIjYjMyYjJiIiwKICAgICAgICBtZW51SWNvblVSSSwKICAgICAgICBibG9ja3M6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgZnVuYzogImNyZWF0ZUJ0biIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQlVUVE9OLAogICAgICAgICAgICB0ZXh0OiAiTWFrZSBhIFNjZW5lIgogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgZnVuYzogImRlbGV0ZUJ0biIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQlVUVE9OLAogICAgICAgICAgICB0ZXh0OiAiUmVtb3ZlIGEgU2NlbmUiCiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImNyZWF0ZVNjZW5lIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiAiY3JlYXRlIG5ldyBzY2VuZSBuYW1lZCBbTkFNRV0iLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBOQU1FOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAic2NlbmUtMSIgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiZGVsZXRlU2NlbmUiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6ICJyZW1vdmUgc2NlbmUgbmFtZWQgW05BTUVdIiwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgTkFNRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogInNjZW5lLTEiIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImRlbGV0ZUFsbCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogInJlbW92ZSBhbGwgc2NlbmVzIiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImFsbFNjZW5lcyIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJhbGwgc2NlbmVzIgogICAgICAgICAgfSwKICAgICAgICAgICItLS0iLAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJ3aGVuU2NlbmVTd2l0Y2giLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkVWRU5ULAogICAgICAgICAgICBpc0VkZ2VBY3RpdmF0ZWQ6IGZhbHNlLAogICAgICAgICAgICB0ZXh0OiAid2hlbiBzY2VuZSBzd2l0Y2hlcyB0byBbTkFNRV0iLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBOQU1FOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlNDRU5FU19BTEwiIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImN1cnJlbnRTY2VuZSIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJjdXJyZW50IHNjZW5lIiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInN3aXRjaFNjZW5lIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiAic3dpdGNoIHRvIHNjZW5lIFtOQU1FXSIsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIE5BTUU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiU0NFTkVTIiB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJ1cGRhdGVTY2VuZSIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogInVwZGF0ZSBjb250ZW50cyBvZiBzY2VuZSBbTkFNRV0iLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBOQU1FOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlNDRU5FUyIgfQogICAgICAgICAgICB9LAogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgbWVudXM6IHsKICAgICAgICAgIFNDRU5FU19BTEw6IHsgYWNjZXB0UmVwb3J0ZXJzOiBmYWxzZSwgaXRlbXM6ICJnZXRTY2VuZXNBbGwiIH0sCiAgICAgICAgICBTQ0VORVM6IHsgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLCBpdGVtczogImdldFNjZW5lcyIgfQogICAgICAgIH0sCiAgICAgIH07CiAgICB9CgogICAgLy8gSGVscGVyIEZ1bmNzCiAgICBnZXRTY2VuZXMoKSB7CiAgICAgIGNvbnN0IHNjZW5lTGlzdCA9IE9iamVjdC5rZXlzKHNjZW5lcyk7CiAgICAgIHJldHVybiBzY2VuZUxpc3QubGVuZ3RoID4gMCA/IHNjZW5lTGlzdCA6IFsiY3JlYXRlIGEgc2NlbmUhIl07CiAgICB9CgogICAgZ2V0U2NlbmVzQWxsKCkgewogICAgICBjb25zdCBzY2VuZUxpc3QgPSBbCiAgICAgICAgeyB0ZXh0OiAiYW55IiwgdmFsdWU6ICJfYW55XyIgfSwKICAgICAgICAuLi5PYmplY3Qua2V5cyhzY2VuZXMpCiAgICAgIF07CiAgICAgIHJldHVybiBzY2VuZUxpc3Q7CiAgICB9CgogICAgY3JlYXRlQnRuKCkgewogICAgICBvcGVuTW9kYWwoIk5ldyBTY2VuZSBuYW1lOiIsIGFzeW5jIChuYW1lKSA9PnsKICAgICAgICBpZiAobmFtZSkgewogICAgICAgICAgc2NlbmVzW25hbWVdID0gdGhpcy5jb252ZXJ0MlNjZW5lKCk7CiAgICAgICAgICBzY2VuZVRodW1ic1tuYW1lXSA9IHsgaXNEZWZhdWx0OiBmYWxzZSwgaW1nOiAiIiB9OwogICAgICAgICAgc2NlbmVUaHVtYnNbbmFtZV0uaW1nID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICAgICAgcmVuZGVyLnJlcXVlc3RTbmFwc2hvdCgodXJpKSA9PiB7IHJlc29sdmUodXJpKSB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5yZWZyZXNoQmxvY2tzKHRydWUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgZGVsZXRlQnRuKCkgewogICAgICBvcGVuTW9kYWwoIlJlbW92ZSBTY2VuZSBuYW1lZDoiLCAobmFtZSkgPT57CiAgICAgICAgaWYgKG5hbWUpIHsKICAgICAgICAgIGRlbGV0ZSBzY2VuZXNbbmFtZV07CiAgICAgICAgICBkZWxldGUgc2NlbmVUaHVtYnNbbmFtZV07CiAgICAgICAgICB0aGlzLnJlZnJlc2hCbG9ja3ModHJ1ZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICByZWZyZXNoQmxvY2tzKG9wdFNhdmVTdG9yYWdlKSB7CiAgICAgIGlmIChpc0VkaXRvcikgewogICAgICAgIHJ1bnRpbWUub25jZSgiQkVGT1JFX0VYRUNVVEUiLCAoKSA9PiB7IHJ1bnRpbWUucmVxdWVzdEJsb2Nrc1VwZGF0ZSgpIH0pOwogICAgICAgIGlmIChvcHRTYXZlU3RvcmFnZSAmJiAhaXNQTSkgcnVudGltZS5leHRlbnNpb25TdG9yYWdlWyJTUHNjZW5lcyJdID0geyBzY2VuZXMgfTsKICAgICAgfQogICAgfQoKICAgIGNvbnZlcnQyU2NlbmUoKSB7CiAgICAgIC8vIGVuY29kZSBzY2VuZSBkYXRhCiAgICAgIGNvbnN0IHNjZW5lRGF0YSA9IHsgdGFyZ2V0czoge30sIGV4dHJhOiB7fSB9OwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJ1bnRpbWUudGFyZ2V0cy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IHRhcmdldCA9IHJ1bnRpbWUudGFyZ2V0c1tpXTsKICAgICAgICBjb25zdCByZWFsSWQgPSBpc1BNID8gdGFyZ2V0LmlkIDogdGFyZ2V0LmV4dGVuc2lvblN0b3JhZ2VbIlNQc2NlbmVzIl0/Lm9nSUQgfHwgdGFyZ2V0LmlkOwogICAgICAgIGNvbnN0IGNsb25lT3JpZ2luID0gdGFyZ2V0LnNwcml0ZS5jbG9uZXNbMF07CgogICAgICAgIC8vIFR1cmJvd2FycCBkb2VzbnQgdXNlIHRoZSBzYW1lIHRhcmdldCBJRCBldmVyeSBwcm9qZWN0IGxvYWQgOigKICAgICAgICBpZiAoIWlzUE0gJiYgIXRhcmdldC5leHRlbnNpb25TdG9yYWdlWyJTUHNjZW5lcyJdKSB0YXJnZXQuZXh0ZW5zaW9uU3RvcmFnZVsiU1BzY2VuZXMiXSA9IHsgb2dJRDogcmVhbElkIH07CgogICAgICAgIGNvbnN0IHNhZmVWYXJzID0gW107CiAgICAgICAgT2JqZWN0LnZhbHVlcyh0YXJnZXQudmFyaWFibGVzKS5tYXAoKHZhcmkpID0+IHsKICAgICAgICAgIGlmICghdmFyaS5pc0Nsb3VkKSBzYWZlVmFycy5wdXNoKFt2YXJpLmlkLCB2YXJpLnZhbHVlXSk7CiAgICAgICAgfSk7CiAgICAgICAgc2NlbmVEYXRhLnRhcmdldHNbcmVhbElkXSA9IHsKICAgICAgICAgIHg6IHRhcmdldC54LCB5OiB0YXJnZXQueSwKICAgICAgICAgIHJvdGF0aW9uOiB0YXJnZXQucm90YXRpb25TdHlsZSwKICAgICAgICAgIGRpcmVjdGlvbjogdGFyZ2V0LmRpcmVjdGlvbiwKICAgICAgICAgIGRyYWc6IHRhcmdldC5kcmFnZ2FibGUsCiAgICAgICAgICBzaXplOiB0YXJnZXQuc2l6ZSwKCiAgICAgICAgICBlZmZlY3RzOiBzdHJ1Y3R1cmVkQ2xvbmUodGFyZ2V0LmVmZmVjdHMpLAogICAgICAgICAgdmlzaWJsZTogdGFyZ2V0LnZpc2libGUsCiAgICAgICAgICBjb3N0dW1lOiB0YXJnZXQuY3VycmVudENvc3R1bWUsCiAgICAgICAgICB2YXJzOiBzYWZlVmFycywKCiAgICAgICAgICB0ZW1wbzogdGFyZ2V0LnRlbXBvLAogICAgICAgICAgaXNTdGFnZTogdGFyZ2V0LmlzU3RhZ2UsCiAgICAgICAgICBpc09nOiB0YXJnZXQuaXNPcmlnaW5hbCwKICAgICAgICAgIG9nSUQ6IGlzUE0gPyBjbG9uZU9yaWdpbi5pZCA6IGNsb25lT3JpZ2luLmV4dGVuc2lvblN0b3JhZ2VbIlNQc2NlbmVzIl0/Lm9nSUQgfHwgY2xvbmVPcmlnaW4uaWQsCiAgICAgICAgICBwZW5EYXRhOiBzdHJ1Y3R1cmVkQ2xvbmUodGFyZ2V0Ll9jdXN0b21TdGF0ZVsiU2NyYXRjaC5wZW4iXSkgfHwge30sCiAgICAgICAgICBleHRTdG9yZTogdGFyZ2V0LmV4dGVuc2lvblN0b3JhZ2UgfHwge30KICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAocnVudGltZS5leHRfdmlkZW9TZW5zaW5nICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBzY2VuZURhdGEuZXh0cmEudmlkZW9TZW5zaW5nID0gewogICAgICAgICAgaXNPbjogcnVudGltZS5leHRfdmlkZW9TZW5zaW5nLmdsb2JhbFZpZGVvU3RhdGUsCiAgICAgICAgICBnaG9zdDogcnVudGltZS5leHRfdmlkZW9TZW5zaW5nLmdsb2JhbFZpZGVvVHJhbnNwYXJlbmN5CiAgICAgICAgfTsKICAgICAgfQogICAgICBpZiAocnVudGltZS5leHRfcGVuICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBjb25zdCBwZW5Tb3VyY2UgPSByZW5kZXIuX2FsbERyYXdhYmxlc1tydW50aW1lLmV4dF9wZW4uX3BlbkRyYXdhYmxlSWRdOwogICAgICAgIGNvbnN0IHBlblNraW4gPSBwZW5Tb3VyY2U/LnNraW47CiAgICAgICAgaWYgKHBlblNraW4pIHsKICAgICAgICAgIGNvbnN0IGVmZmVjdHMgPSBzdHJ1Y3R1cmVkQ2xvbmUocGVuU291cmNlLl91bmlmb3Jtcyk7CiAgICAgICAgICBkZWxldGUgZWZmZWN0cy51X3NpbGhvdWV0dGVDb2xvcjsKICAgICAgICAgIGRlbGV0ZSBlZmZlY3RzLnVfbW9kZWxNYXRyaXg7CiAgICAgICAgICBzY2VuZURhdGEuZXh0cmEucGVuRGF0YSA9IHsKICAgICAgICAgICAgdmlzaWJsZTogcGVuU291cmNlLl92aXNpYmxlLCBlZmZlY3RzLAogICAgICAgICAgICBkaXJlY3Rpb246IHBlblNvdXJjZS5fZGlyZWN0aW9uLAogICAgICAgICAgICBzaXplOiBbcGVuU291cmNlLl9zY2FsZVswXSwgcGVuU291cmNlLl9zY2FsZVsxXV0sCiAgICAgICAgICAgIHBvczogW3BlblNvdXJjZS5fcG9zaXRpb25bMF0sIHBlblNvdXJjZS5fcG9zaXRpb25bMV1dCiAgICAgICAgICAgIC8vIHBlbiBhdHRyaWJ1dGVzIGlzIHNwcml0ZS1iYXNlZCBhbmQgaXMgc3RvcmVkIGluIHRhcmdldCBzdG9yYWdlCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gc2F2ZSBzb21lIHJ1bnRpbWUgb3B0aW9ucwogICAgICBzY2VuZURhdGEuZXh0cmEucnVudGltZU9wdHMgPSB7CiAgICAgICAgdHVyYm9tb2RlOiBydW50aW1lLnR1cmJvTW9kZSwKICAgICAgICBpbnRlcnBvbGF0ZTogcnVudGltZS5pbnRlcnBvbGF0aW9uRW5hYmxlZCwKICAgICAgICBmZW5jZTogcnVudGltZS5ydW50aW1lT3B0aW9ucy5mZW5jaW5nLAogICAgICAgIG1pc2NMaW06IHJ1bnRpbWUucnVudGltZU9wdGlvbnMubWlzY0xpbWl0cywKICAgICAgICBoaWdoUXVhbGl0eTogcmVuZGVyLnVzZUhpZ2hRdWFsaXR5UmVuZGVyLAogICAgICAgIGZwczogcnVudGltZS5mcmFtZUxvb3AuZnJhbWVyYXRlLAogICAgICAgIGRpbWVuc2lvbnM6IFtydW50aW1lLnN0YWdlV2lkdGgsIHJ1bnRpbWUuc3RhZ2VIZWlnaHRdCiAgICAgIH07CgogICAgICBpZiAoIWlzUE0pIHsKICAgICAgICBjb25zdCBjbGVhblN0b3JhZ2UgPSBzdHJ1Y3R1cmVkQ2xvbmUocnVudGltZS5leHRlbnNpb25TdG9yYWdlKTsKICAgICAgICBkZWxldGUgY2xlYW5TdG9yYWdlWyJTUHNjZW5lcyJdOwogICAgICAgIHNjZW5lRGF0YS5leHRyYS5leHREYXRhID0gY2xlYW5TdG9yYWdlOwoKICAgICAgICAvLyBzYXZlIHRvIHN0b3JhZ2UKICAgICAgICBydW50aW1lLmV4dGVuc2lvblN0b3JhZ2VbIlNQc2NlbmVzIl0gPSB7IHNjZW5lcyB9OwogICAgICB9CiAgICAgIHJldHVybiBzY2VuZURhdGE7CiAgICB9CgogICAgc3dpdGNoMlNjZW5lKG5hbWUsIHNjZW5lRGF0YSkgewogICAgICAvLyByZXF1aXJlZCB0byBub3QgZGVsZXRlIHJlYWwgZGF0YQogICAgICBzY2VuZURhdGEgPSBzdHJ1Y3R1cmVkQ2xvbmUoc2NlbmVEYXRhKTsKICAgICAgdGhpc1NjZW5lID0gbmFtZTsKCiAgICAgIGxldCBwZW5Tb3VyY2UsIHBlblNraW47CiAgICAgIGlmIChydW50aW1lLmV4dF9wZW4gIT09IHVuZGVmaW5lZCkgewogICAgICAgIHBlblNvdXJjZSA9IHJlbmRlci5fYWxsRHJhd2FibGVzW3J1bnRpbWUuZXh0X3Blbi5fcGVuRHJhd2FibGVJZF07CiAgICAgICAgcGVuU2tpbiA9IHBlblNvdXJjZT8uc2tpbjsKICAgICAgfQoKICAgICAgLy8gZGVjb2RlIFNwcml0ZSBkYXRhCiAgICAgIGNvbnN0IGNsb25lSGFuZGxlciA9IChvZ0lEKSA9PiB7CiAgICAgICAgY29uc3QgY2xvbmVUYXJnZXQgPSBpc1BNID8gcnVudGltZS5nZXRUYXJnZXRCeUlkKG9nSUQpIDoKICAgICAgICAgIHJ1bnRpbWUudGFyZ2V0cy5maW5kKCh0KSA9PiB7IHJldHVybiB0LmV4dGVuc2lvblN0b3JhZ2VbIlNQc2NlbmVzIl0/Lm9nSUQgPT09IG9nSUQgfSk7CiAgICAgICAgaWYgKGNsb25lVGFyZ2V0ID09PSB1bmRlZmluZWQpIHJldHVybiB1bmRlZmluZWQ7CiAgICAgICAgY29uc3QgY2xvbmUgPSBjbG9uZVRhcmdldC5tYWtlQ2xvbmUoKTsKICAgICAgICBpZiAoY2xvbmUpIHsKICAgICAgICAgIHJ1bnRpbWUuYWRkVGFyZ2V0KGNsb25lKTsKICAgICAgICAgIGNsb25lLmdvQmVoaW5kT3RoZXIoY2xvbmVUYXJnZXQpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gY2xvbmUgfHwgdW5kZWZpbmVkOwogICAgICB9OwogICAgICBjb25zdCBhcHBseURhdGEgPSAodGFyZ2V0LCBkYXRhKSA9PiB7CiAgICAgICAgdGFyZ2V0LnggPSBkYXRhLng7CiAgICAgICAgdGFyZ2V0LnkgPSBkYXRhLnk7CiAgICAgICAgdGFyZ2V0LnJvdGF0aW9uU3R5bGUgPSBkYXRhLnJvdGF0aW9uOwogICAgICAgIHRhcmdldC5kaXJlY3Rpb24gPSBkYXRhLmRpcmVjdGlvbjsKICAgICAgICB0YXJnZXQuZHJhZ2dhYmxlID0gZGF0YS5kcmFnOwogICAgICAgIHRhcmdldC5zaXplID0gZGF0YS5zaXplOwogICAgICAgIHRhcmdldC5lZmZlY3RzID0gZGF0YS5lZmZlY3RzOwogICAgICAgIHRhcmdldC52aXNpYmxlID0gZGF0YS52aXNpYmxlOwogICAgICAgIHRhcmdldC5jdXJyZW50Q29zdHVtZSA9IGRhdGEuY29zdHVtZTsKICAgICAgICBkYXRhLnZhcnMuZm9yRWFjaCgoaXRlbSkgPT4geyB0YXJnZXQudmFyaWFibGVzW2l0ZW1bMF1dLnZhbHVlID0gaXRlbVsxXSB9KTsKICAgICAgICB0YXJnZXQudGVtcG8gPSBkYXRhLnRlbXBvOwogICAgICAgIHRhcmdldC5leHRlbnNpb25TdG9yYWdlID0gZGF0YS5leHRTdG9yZTsKCiAgICAgICAgdGFyZ2V0LnVwZGF0ZUFsbERyYXdhYmxlUHJvcGVydGllcygpOwogICAgICAgIGlmIChkYXRhLnBlbkRhdGEucGVuRG93biAhPT0gdW5kZWZpbmVkKSBwZW5IYW5kbGVyKHRhcmdldCwgZGF0YS5wZW5EYXRhKTsKICAgICAgfTsKICAgICAgY29uc3QgcGVuSGFuZGxlciA9ICh0YXJnZXQsIHBlbkRhdGEpID0+IHsKICAgICAgICBjb25zdCBwZW5DdHggPSBydW50aW1lLmV4dF9wZW47CiAgICAgICAgY29uc3QgY29sb3JDb252ZXJ0ID0gKHIsIGcsIGIsIGEpID0+IHsKICAgICAgICAgIGNvbnN0IHJlZCA9IE1hdGgucm91bmQociAqIDI1NSk7CiAgICAgICAgICBjb25zdCBncmVlbiA9IE1hdGgucm91bmQoZyAqIDI1NSk7CiAgICAgICAgICBjb25zdCBibHVlID0gTWF0aC5yb3VuZChiICogMjU1KTsKICAgICAgICAgIGNvbnN0IGFscGhhID0gTWF0aC5yb3VuZChhICogMjU1KTsKICAgICAgICAgIHJldHVybiAoYWxwaGEgPDwgMjQpIHwgKHJlZCA8PCAxNikgfCAoZ3JlZW4gPDwgOCkgfCBibHVlOwogICAgICAgIH0KCiAgICAgICAgaWYgKHBlbkRhdGEucGVuRG93bikgcGVuQ3R4LnBlbkRvd24oe30sIHsgdGFyZ2V0IH0pOwogICAgICAgIGVsc2UgcGVuQ3R4LnBlblVwKHt9LCB7IHRhcmdldCB9KTsKICAgICAgICBwZW5DdHguc2V0UGVuU2l6ZVRvKHsgU0laRTogcGVuRGF0YS5wZW5BdHRyaWJ1dGVzLmRpYW1ldGVyIH0sIHsgdGFyZ2V0IH0pOwoKICAgICAgICBwZW5DdHguc2V0UGVuQ29sb3JUb0NvbG9yKHsgQ09MT1I6IGNvbG9yQ29udmVydCguLi5wZW5EYXRhLnBlbkF0dHJpYnV0ZXMuY29sb3I0ZikgfSwgeyB0YXJnZXQgfSk7CiAgICAgICAgcGVuQ3R4LnNldFBlbkNvbG9yUGFyYW1Ubyh7IENPTE9SX1BBUkFNOiAiY29sb3IiLCBWQUxVRTogcGVuRGF0YS5jb2xvciB9LCB7IHRhcmdldCB9KTsKICAgICAgICBwZW5DdHguc2V0UGVuQ29sb3JQYXJhbVRvKHsgQ09MT1JfUEFSQU06ICJzYXR1cmF0aW9uIiwgVkFMVUU6IHBlbkRhdGEuc2F0dXJhdGlvbiB9LCB7IHRhcmdldCB9KTsKICAgICAgICBwZW5DdHguc2V0UGVuQ29sb3JQYXJhbVRvKHsgQ09MT1JfUEFSQU06ICJicmlnaHRuZXNzIiwgVkFMVUU6IHBlbkRhdGEuYnJpZ2h0bmVzcyB9LCB7IHRhcmdldCB9KTsKICAgICAgICBwZW5DdHguc2V0UGVuQ29sb3JQYXJhbVRvKHsgQ09MT1JfUEFSQU06ICJ0cmFuc3BhcmVuY3kiLCBWQUxVRTogcGVuRGF0YS50cmFuc3BhcmVuY3kgfSwgeyB0YXJnZXQgfSk7CiAgICAgIH07CgogICAgICAvLyBpdGVyYXRlIHRocm91Z2ggZWFjaCB0YXJnZXQgYW5kIGFwcGx5IGRhdGEKICAgICAgLy8gaWYgdGhlcmUgaXNudCBhbnksIHJlbW92ZSBleHRyYSBzcHJpdGVzIChkZWxldGUgY2xvbmVzIHZzIGhpZGUgbm9ybWFsIHNwcml0ZXMpCiAgICAgIGNvbnN0IHRhcmdldERhdGEgPSBzY2VuZURhdGEudGFyZ2V0czsKICAgICAgZm9yIChsZXQgaSA9IHJ1bnRpbWUudGFyZ2V0cy5sZW5ndGg7IGktLTspIHsKICAgICAgICBjb25zdCB0YXJnZXQgPSBydW50aW1lLnRhcmdldHNbaV07CiAgICAgICAgLy8gVHVyYm93YXJwIGRvZXNudCB1c2UgdGhlIHNhbWUgdGFyZ2V0IElEIGV2ZXJ5IHByb2plY3QgbG9hZCA6KAogICAgICAgIGNvbnN0IHJlYWxJZCA9IGlzUE0gPyB0YXJnZXQuaWQgOiB0YXJnZXQuZXh0ZW5zaW9uU3RvcmFnZVsiU1BzY2VuZXMiXT8ub2dJRCB8fCB0YXJnZXQuaWQ7CiAgICAgICAgY29uc3QgZGF0YSA9IHRhcmdldERhdGFbcmVhbElkXTsKICAgICAgICBpZiAoZGF0YSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBpZiAodGFyZ2V0LmlzT3JpZ2luYWwpIHRhcmdldC5zZXRWaXNpYmxlKGZhbHNlKTsKICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBydW50aW1lLmRpc3Bvc2VUYXJnZXQodGFyZ2V0KTsKICAgICAgICAgICAgcnVudGltZS5zdG9wRm9yVGFyZ2V0KHRhcmdldCk7CiAgICAgICAgICB9CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgYXBwbHlEYXRhKHRhcmdldCwgZGF0YSk7CiAgICAgICAgZGVsZXRlIHRhcmdldERhdGFbcmVhbElkXTsKICAgICAgfQogICAgICBPYmplY3QuZW50cmllcyh0YXJnZXREYXRhKS5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgY29uc3QgZGF0YSA9IGl0ZW1bMV07CiAgICAgICAgbGV0IHRhcmdldDsKICAgICAgICBpZiAoIWRhdGEuaXNPZykgdGFyZ2V0ID0gY2xvbmVIYW5kbGVyKGRhdGEub2dJRCk7CiAgICAgICAgZWxzZSBpZiAoZGF0YS5pc1N0YWdlKSB0YXJnZXQgPSBydW50aW1lLmdldFRhcmdldEZvclN0YWdlKCk7CiAgICAgICAgZWxzZSB0YXJnZXQgPSBydW50aW1lLmdldFRhcmdldEJ5SWQoaXRlbVswXSk7CgogICAgICAgIC8vIHNob3VsZG50IGhhcHBlbiwgYnV0IGp1c3QgaW4gY2FzZQogICAgICAgIGlmICh0YXJnZXQgIT09IHVuZGVmaW5lZCkgYXBwbHlEYXRhKHRhcmdldCwgZGF0YSk7CiAgICAgIH0pOwoKICAgICAgLy8gZGVjb2RlIEV4dHJhIGRhdGEKICAgICAgY29uc3QgZXh0cmFzID0gc2NlbmVEYXRhLmV4dHJhOwogICAgICBjb25zdCB2aWRlb1NlbnNpbmcgPSBydW50aW1lLmV4dF92aWRlb1NlbnNpbmc7CiAgICAgIGlmICh2aWRlb1NlbnNpbmcgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGlmIChleHRyYXMudmlkZW9TZW5zaW5nLmlzT24pIHJ1bnRpbWUuaW9EZXZpY2VzLnZpZGVvLmVuYWJsZVZpZGVvKCk7CiAgICAgICAgZWxzZSBydW50aW1lLmlvRGV2aWNlcy52aWRlby5kaXNhYmxlVmlkZW8oKTsKICAgICAgICB2aWRlb1NlbnNpbmcuc2V0VmlkZW9UcmFuc3BhcmVuY3koZXh0cmFzLnZpZGVvU2Vuc2luZy5naG9zdCk7CiAgICAgIH0KICAgICAgaWYgKHBlblNvdXJjZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcGVuU291cmNlLnVwZGF0ZVByb3BlcnRpZXMoewogICAgICAgICAgcG9zaXRpb246IGV4dHJhcy5wZW5EYXRhLnBvcywKICAgICAgICAgIGRpcmVjdGlvbjogZXh0cmFzLnBlbkRhdGEuZGlyZWN0aW9uLAogICAgICAgICAgc2NhbGU6IGV4dHJhcy5wZW5EYXRhLnNpemUsCiAgICAgICAgICB2aXNpYmxlOiBleHRyYXMucGVuRGF0YS52aXNpYmxlLAogICAgICAgIH0pOwoKICAgICAgICBPYmplY3QuZW50cmllcyhleHRyYXMucGVuRGF0YS5lZmZlY3RzKS5mb3JFYWNoKChhdHQpID0+IHsKICAgICAgICAgIHBlblNvdXJjZS5fdW5pZm9ybXNbYXR0WzBdXSA9IFthdHRbMV1dOwogICAgICAgIH0pOwogICAgICAgIHJlbmRlci5kaXJ0eSA9IHRydWU7CiAgICAgICAgcGVuU291cmNlLnNldENvbnZleEh1bGxEaXJ0eSgpOwogICAgICB9CgogICAgICBjb25zdCBydW50aW1lT3B0cyA9IGV4dHJhcy5ydW50aW1lT3B0czsKICAgICAgcmVuZGVyLnNldFVzZUhpZ2hRdWFsaXR5UmVuZGVyKHJ1bnRpbWVPcHRzLmhpZ2hRdWFsaXR5KTsKICAgICAgdm0uc2V0VHVyYm9Nb2RlKHJ1bnRpbWVPcHRzLnR1cmJvbW9kZSk7CiAgICAgIHZtLnNldEludGVycG9sYXRpb24ocnVudGltZU9wdHMuaW50ZXJwb2xhdGUpOwogICAgICB2bS5zZXRGcmFtZXJhdGUocnVudGltZU9wdHMuZnBzKTsKICAgICAgdm0uc2V0U3RhZ2VTaXplKHJ1bnRpbWVPcHRzLmRpbWVuc2lvbnNbMF0sIHJ1bnRpbWVPcHRzLmRpbWVuc2lvbnNbMV0pOwogICAgICB2bS5zZXRSdW50aW1lT3B0aW9ucyh7IGZlbmNpbmc6IHJ1bnRpbWVPcHRzLmZlbmNlIH0pOwoKICAgICAgaWYgKCFpc1BNKSB7CiAgICAgICAgcnVudGltZS5leHRlbnNpb25TdG9yYWdlID0gc2NlbmVEYXRhLmV4dHJhLmV4dERhdGE7CiAgICAgICAgLy8gZG8gdGhpcyB0byBwcmV2ZW50IHJlcGV0aXRpb24gaW4gdGhlIGpzb24KICAgICAgICBydW50aW1lLmV4dGVuc2lvblN0b3JhZ2VbIlNQc2NlbmVzIl0gPSB7IHNjZW5lcyB9OwogICAgICB9CgogICAgICBydW50aW1lLnN0YXJ0SGF0cygiU1BzY2VuZXNfd2hlblNjZW5lU3dpdGNoIiwgeyBOQU1FOiB0aGlzU2NlbmUgfSk7CiAgICAgIHJ1bnRpbWUuc3RhcnRIYXRzKCJTUHNjZW5lc193aGVuU2NlbmVTd2l0Y2giLCB7IE5BTUU6ICJfYW55XyIgfSk7CiAgICB9CgogICAgLy8gQmxvY2sgRnVuY3MKICAgIGNyZWF0ZVNjZW5lKGFyZ3MpIHsKICAgICAgY29uc3QgbmFtZSA9IFNjcmF0Y2guQ2FzdC50b1N0cmluZyhhcmdzLk5BTUUpOwogICAgICBpZiAoc2NlbmVzW25hbWVdID09PSB1bmRlZmluZWQpIHsKICAgICAgICBzY2VuZXNbbmFtZV0gPSB0aGlzLmNvbnZlcnQyU2NlbmUoKTsKICAgICAgICBpZiAoaXNFZGl0b3IpIHNjZW5lVGh1bWJzW25hbWVdID0geyBpc0RlZmF1bHQ6IHRydWUsIGltZzogZGVmYXVsdFNjZW5lVGh1bWIgfTsKICAgICAgICB0aGlzLnJlZnJlc2hCbG9ja3MoKTsKICAgICAgfQogICAgfQoKICAgIGRlbGV0ZVNjZW5lKGFyZ3MpIHsKICAgICAgY29uc3QgbmFtZSA9IFNjcmF0Y2guQ2FzdC50b1N0cmluZyhhcmdzLk5BTUUpOwogICAgICBkZWxldGUgc2NlbmVzW25hbWVdOwogICAgICBpZiAoaXNFZGl0b3IpIGRlbGV0ZSBzY2VuZVRodW1ic1tuYW1lXTsKICAgICAgaWYgKHRoaXNTY2VuZSA9PT0gbmFtZSkgdGhpc1NjZW5lID0gIiI7CiAgICAgIHRoaXMucmVmcmVzaEJsb2Nrcyh0cnVlKTsKICAgIH0KCiAgICBkZWxldGVBbGwoKSB7CiAgICAgIHNjZW5lcyA9IHt9OwogICAgICBzY2VuZVRodW1icyA9IHt9OwogICAgICB0aGlzLnJlZnJlc2hCbG9ja3ModHJ1ZSk7CiAgICB9CgogICAgYWxsU2NlbmVzKCkgeyByZXR1cm4gSlNPTi5zdHJpbmdpZnkoT2JqZWN0LmtleXMoc2NlbmVzKSkgfQoKICAgIGN1cnJlbnRTY2VuZSgpIHsgcmV0dXJuIHRoaXNTY2VuZSB9CgogICAgc3dpdGNoU2NlbmUoYXJncykgewogICAgICBjb25zdCBuYW1lID0gU2NyYXRjaC5DYXN0LnRvU3RyaW5nKGFyZ3MuTkFNRSk7CiAgICAgIGlmIChzY2VuZXNbbmFtZV0gPT09IHVuZGVmaW5lZCkgYWxlcnQoYFNQc2NlbmVzIC0tIFNjZW5lIG5hbWVkOiAke25hbWV9IGRvZXMgbm90IGV4aXN0IWApOwogICAgICBlbHNlIHRoaXMuc3dpdGNoMlNjZW5lKG5hbWUsIHNjZW5lc1tuYW1lXSk7CiAgICB9CgogICAgdXBkYXRlU2NlbmUoYXJncykgewogICAgICBjb25zdCBuYW1lID0gU2NyYXRjaC5DYXN0LnRvU3RyaW5nKGFyZ3MuTkFNRSk7CiAgICAgIGlmIChzY2VuZXNbbmFtZV0gPT09IHVuZGVmaW5lZCkgYWxlcnQoYFNQc2NlbmVzIC0tIFNjZW5lIG5hbWVkOiAke25hbWV9IGRvZXMgbm90IGV4aXN0IWApOwogICAgICBlbHNlIHsKICAgICAgICBzY2VuZXNbbmFtZV0gPSB0aGlzLmNvbnZlcnQyU2NlbmUoKTsKICAgICAgICBpZiAoaXNFZGl0b3IpIHsKICAgICAgICAgIHRoaXMucmVmcmVzaEJsb2Nrcyh0cnVlKTsKICAgICAgICAgIHNjZW5lVGh1bWJzW25hbWVdID0geyBpc0RlZmF1bHQ6IHRydWUsIGltZzogZGVmYXVsdFNjZW5lVGh1bWIgfTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICAvLyBQZW5ndWluTW9kIFN0b3JhZ2UKICAgIHNlcmlhbGl6ZSgpIHsKICAgICAgcmV0dXJuIHsgU1BzY2VuZXM6IHsgc2NlbmVzIH0gfTsKICAgIH0KICAgIGRlc2VyaWFsaXplKGRhdGEpIHsKICAgICAgaWYgKGRhdGEuU1BzY2VuZXMgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHNjZW5lcyA9IGRhdGEuU1BzY2VuZXMuc2NlbmVzOwogICAgICAgIGlmIChpc0VkaXRvcikgT2JqZWN0LmtleXMoc2NlbmVzKS5mb3JFYWNoKChuYW1lKSA9PiB7CiAgICAgICAgICBzY2VuZVRodW1ic1tuYW1lXSA9IHsgaXNEZWZhdWx0OiB0cnVlLCBpbWc6IGRlZmF1bHRTY2VuZVRodW1iIH07CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9CgogIFNjcmF0Y2guZXh0ZW5zaW9ucy5yZWdpc3RlcihuZXcgU1BzY2VuZXMoKSk7Cn0pKFNjcmF0Y2gpOwo=","text":"https://extensions.turbowarp.org/lab/text.js","speechSP":"data:text/javascript;base64,Ly8gTmFtZTogU3BlZWNoIEJ1YmJsZXMNCi8vIElEOiBzcGVlY2hTUA0KLy8gRGVzY3JpcHRpb246IEN1c3RvbWl6YWJsZSBTcGVlY2ggQnViYmxlcw0KLy8gQnk6IFNoYXJrUG9vbA0KDQovLyBWZXJzaW9uIFYuMS4zLjANCg0KKGZ1bmN0aW9uIChTY3JhdGNoKSB7DQogICJ1c2Ugc3RyaWN0IjsNCiAgaWYgKCFTY3JhdGNoLmV4dGVuc2lvbnMudW5zYW5kYm94ZWQpIHRocm93IG5ldyBFcnJvcigiU3BlZWNoIEJ1YmJsZXMgbXVzdCBydW4gdW5zYW5kYm94ZWQiKTsNCg0KICBjb25zdCBtZW51SWNvblVSSSA9DQoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhkcFpIUm9QU0kyTnk0d05UZ2lJR2hsYVdkb2REMGlOamN1TURVNElpQjJhV1YzUW05NFBTSXdJREFnTmpjdU1EVTRJRFkzTGpBMU9DSStQSEJoZEdnZ1pEMGlUVEV1TnpVZ016TXVOVE5qTUMweE55NDFOVEVnTVRRdU1qSTVMVE14TGpjNElETXhMamM0TFRNeExqYzRjek14TGpjNElERTBMakl5T1NBek1TNDNPQ0F6TVM0M09DMHhOQzR5TWprZ016RXVOemd0TXpFdU56Z2dNekV1TnpoVE1TNDNOU0ExTVM0d09ERWdNUzQzTlNBek15NDFNM29pSUdacGJHdzlJaU01Tm1ZaUlITjBjbTlyWlQwaUl6YzNOR1JqWWlJZ2MzUnliMnRsTFhkcFpIUm9QU0l6TGpVaUx6NDhjR0YwYUNCa1BTSk5PUzR4TlRFZ016a3VNVFUyWXkweUxqTTNMVGd1TlRVM0lERXVPRFkzTFRFeUxqVTNNeUExTGpVNE55MHhNeTQxTWpJZ05DNDFNamd0TVM0eE5UWWdNVFF1TkRnMExUTXVPVGMxSURJeUxqSTJOeTAxTGpZNE15QXpMamd0TGpnek5DQXhNQzR3TURNdU5qSTJJREV4TGprMU9DQTVMakEwTlNBeExqZzFJRGN1T1RZM0xUTXVOalE0SURFeExqazBMVFl1TkRnMklERXlMalkyTkd3dE1URXVPREF6SURNdU1ERXlZeTB4TGpJNU5pNHpNekV0TXk0eE9DQTRMakE1TnkwNUxqRTFNeUE1TGpRd05DMDBMakl6Tmk0NU1qY3VOamswTFRjdU1qUTFMUzQ1T1RFdE5pNDRNVFV0TkM0NU9UZ2dNUzR5TnpZdE9TNDNNeTB5TGpFME9TMHhNUzR6TnprdE9DNHhNRFVpSUdacGJHdzlJaU5tWm1ZaUx6NDhjR0YwYUNCa1BTSk5ORGt1TWpZM0lEUTBMakV5T0dFeUxqUTFJREl1TkRVZ01DQXdJREFnTWk0ME5UTWdNR3d4TGpjeU5pMHVPVGsxWXk0NE1UY3RMalEzSURFdU56TXVORFF6SURFdU1qWWdNUzR5Tm13dExqazVOU0F4TGpjeU4yRXlMalEySURJdU5EWWdNQ0F3SURBZ01DQXlMalExTW13dU9UazBJREV1TnpJMll5NDBOeTQ0TVRjdExqUTBNeUF4TGpjekxURXVNallnTVM0eU5td3RNUzQzTWpZdExqazVOV0V5TGpRMklESXVORFlnTUNBd0lEQXRNaTQwTlRFZ01Hd3RNUzQzTWpndU9UazBZeTB1T0RFMkxqUTNMVEV1TnpJNExTNDBOREl0TVM0eU5Ua3RNUzR5TlRsc0xqazVOUzB4TGpjeU5tRXlMalEySURJdU5EWWdNQ0F3SURBZ01DMHlMalExTW13dExqazVOaTB4TGpjeU4yTXRMalEzTFM0NE1UY3VORFF6TFRFdU56TWdNUzR5TmkweExqSTJlazB6TkM0eE16SWdNVEF1TnpreFlUSXVOelVnTWk0M05TQXdJREFnTUNBdU5UY3pJREl1TmpnNGJERXVORGt6SURFdU5qWmpMamN3Tmk0M09EVXRMakE0TVNBeExqazVPQzB4TGpBNE5TQXhMalkzTkd3dE1pNHhNalV0TGpZNE5tRXlMamMxSURJdU56VWdNQ0F3SURBdE1pNDJPRGN1TlRjeWJDMHhMalkySURFdU5EazBZeTB1TnpnMUxqY3dOUzB4TGprNU9DMHVNRGd5TFRFdU5qYzFMVEV1TURnM2JDNDJPRGN0TWk0eE1qUmhNaTQzTlNBeUxqYzFJREFnTUNBd0xTNDFOek10TWk0Mk9EWnNMVEV1TkRreUxURXVOalpqTFM0M01EY3RMamM0TlM0d09DMHhMams1T0NBeExqQTROUzB4TGpZM05Hd3lMakV5TkM0Mk9EWmhNaTQzTlNBeUxqYzFJREFnTUNBd0lESXVOamczTFM0MU56UnNNUzQyTmkweExqUTVNMk11TnpnMUxTNDNNRFVnTVM0NU9UZ3VNRGd4SURFdU5qYzBJREV1TURnMmVrMDFOUzQxT1RnZ01qTXVPRFpqTGpNeE5TNDFPVEV1T1RJeUxqazNJREV1TlRreUxqazVNbXd4TGpVeU15NHdOVEpqTGpjeUxqQXlOaTQ1TkRRdU9UZzNMak13T1NBeExqTXlOMnd0TVM0ek5EUXVOekpqTFM0MU9URXVNekUxTFM0NU55NDVNakl0TGprNU1pQXhMalU1TVd3dExqQTFNeUF4TGpVeU0yTXRMakF5TlM0M01pMHVPVGczTGprME5DMHhMak15Tnk0ek1EbHNMUzQzTVRrdE1TNHpORFJoTVM0NE9DQXhMamc0SURBZ01DQXdMVEV1TlRreExTNDVPVEZzTFRFdU5USTBMUzR3TlRSakxTNDNNaTB1TURJMExTNDVORE10TGprNE5pMHVNekE0TFRFdU16STJiREV1TXpRMExTNDNNVGxqTGpVNUxTNHpNVFV1T1RZNExTNDVNakl1T1RreExURXVOVGt5YkM0d05USXRNUzQxTWpSakxqQXlOaTB1TnpJdU9UZzNMUzQ1TkRNZ01TNHpNamd0TGpNd09Ib2lJR1pwYkd3OUlpTm1abVlpSUdacGJHd3RjblZzWlQwaVpYWmxibTlrWkNJdlBqd3ZjM1puUGc9PSI7DQogIGNvbnN0IGJsb2NrSWNvblVSSSA9DQoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhkcFpIUm9QU0kyTVM0eU9EZ2lJR2hsYVdkb2REMGlOakV1TWpnNElpQjJhV1YzUW05NFBTSXdJREFnTmpFdU1qZzRJRFl4TGpJNE9DSStQSEJoZEdnZ1pEMGlUVEFnTmpFdU1qZzRWakJvTmpFdU1qZzRkall4TGpJNE9Ib2lJR1pwYkd3OUltNXZibVVpTHo0OGNHRjBhQ0JrUFNKTk5pNHlOalVnTXpZdU1qZGpMVEl1TXpjdE9DNDFOVGNnTVM0NE5qY3RNVEl1TlRjeklEVXVOVGczTFRFekxqVXlNaUEwTGpVeU9DMHhMakUxTmlBeE5DNDBPRFF0TXk0NU56VWdNakl1TWpZM0xUVXVOamd6SURNdU9DMHVPRE0wSURFd0xqQXdNeTQyTWpZZ01URXVPVFU0SURrdU1EUTFJREV1T0RVZ055NDVOamN0TXk0Mk5EZ2dNVEV1T1RRdE5pNDBPRFlnTVRJdU5qWTBiQzB4TVM0NE1ETWdNeTR3TVRKakxURXVNamsyTGpNek1TMHpMakU0SURndU1EazNMVGt1TVRVeklEa3VOREEwTFRRdU1qTTJMamt5Tnk0Mk9UUXROeTR5TkRVdExqazVNUzAyTGpneE5TMDBMams1T0NBeExqSTNOaTA1TGpjekxUSXVNVFE1TFRFeExqTTNPUzA0TGpFd05TSWdabWxzYkQwaUkyWm1aaUl2UGp4d1lYUm9JR1E5SWswME5pNHpPREVnTkRFdU1qUXlZVEl1TkRVZ01pNDBOU0F3SURBZ01DQXlMalExTXlBd2JERXVOekkyTFM0NU9UVmpMamd4TnkwdU5EY2dNUzQzTXk0ME5ETWdNUzR5TmlBeExqSTJiQzB1T1RrMUlERXVOekkzWVRJdU5EWWdNaTQwTmlBd0lEQWdNQ0F3SURJdU5EVXliQzQ1T1RRZ01TNDNNalpqTGpRM0xqZ3hOeTB1TkRReklERXVOek10TVM0eU5pQXhMakkyYkMweExqY3lOaTB1T1RrMVlUSXVORFlnTWk0ME5pQXdJREFnTUMweUxqUTFNU0F3YkMweExqY3lPQzQ1T1RSakxTNDRNVFl1TkRjdE1TNDNNamd0TGpRME1pMHhMakkxT1MweExqSTFPV3d1T1RrMUxURXVOekkyWVRJdU5EWWdNaTQwTmlBd0lEQWdNQ0F3TFRJdU5EVXliQzB1T1RrMkxURXVOekkzWXkwdU5EY3RMamd4Tnk0ME5ETXRNUzQzTXlBeExqSTJMVEV1TWpaNlRUTXhMakkwTmlBM0xqa3dOV0V5TGpjMUlESXVOelVnTUNBd0lEQWdMalUzTXlBeUxqWTRPR3d4TGpRNU15QXhMalkyWXk0M01EWXVOemcxTFM0d09ERWdNUzQ1T1RndE1TNHdPRFVnTVM0Mk56UnNMVEl1TVRJMUxTNDJPRFpoTWk0M05TQXlMamMxSURBZ01DQXdMVEl1TmpnM0xqVTNNbXd0TVM0Mk5pQXhMalE1TkdNdExqYzROUzQzTURVdE1TNDVPVGd0TGpBNE1pMHhMalkzTlMweExqQTROMnd1TmpnM0xUSXVNVEkwWVRJdU56VWdNaTQzTlNBd0lEQWdNQzB1TlRjekxUSXVOamcyYkMweExqUTVNaTB4TGpZMll5MHVOekEzTFM0M09EVXVNRGd0TVM0NU9UZ2dNUzR3T0RVdE1TNDJOelJzTWk0eE1qUXVOamcyWVRJdU56VWdNaTQzTlNBd0lEQWdNQ0F5TGpZNE55MHVOVGMwYkRFdU5qWXRNUzQwT1ROakxqYzROUzB1TnpBMUlERXVPVGs0TGpBNE1TQXhMalkzTkNBeExqQTRObnB0TWpFdU5EWTJJREV6TGpBMk9XTXVNekUxTGpVNU1TNDVNakl1T1RjZ01TNDFPVEl1T1RreWJERXVOVEl6TGpBMU1tTXVOekl1TURJMkxqazBOQzQ1T0RjdU16QTVJREV1TXpJM2JDMHhMak0wTkM0M01tTXRMalU1TVM0ek1UVXRMamszTGpreU1pMHVPVGt5SURFdU5Ua3hiQzB1TURVeklERXVOVEl6WXkwdU1ESTFMamN5TFM0NU9EY3VPVFEwTFRFdU16STNMak13T1d3dExqY3hPUzB4TGpNME5HRXhMamc0SURFdU9EZ2dNQ0F3SURBdE1TNDFPVEV0TGprNU1Xd3RNUzQxTWpRdExqQTFOR010TGpjeUxTNHdNalF0TGprME15MHVPVGcyTFM0ek1EZ3RNUzR6TWpac01TNHpORFF0TGpjeE9XTXVOVGt0TGpNeE5TNDVOamd0TGpreU1pNDVPVEV0TVM0MU9USnNMakExTWkweExqVXlOR011TURJMkxTNDNNaTQ1T0RjdExqazBNeUF4TGpNeU9DMHVNekE0ZWlJZ1ptbHNiRDBpSTJabVppSWdabWxzYkMxeWRXeGxQU0psZG1WdWIyUmtJaTgrUEM5emRtYysiOw0KDQogIGNvbnN0IHZtID0gU2NyYXRjaC52bTsNCiAgY29uc3QgcnVudGltZSA9IHZtLnJ1bnRpbWU7DQogIGNvbnN0IHJlbmRlciA9IHZtLnJlbmRlcmVyOw0KDQogIGNvbnN0IGZvbnRNZW51ID0gWw0KICAgICJTY3JhdGNoIiwgIlNhbnMgU2VyaWYiLCAiU2VyaWYiLA0KICAgICJIYW5kd3JpdGluZyIsICJNYXJrZXIiLCAiQ3VybHkiLCAiUGl4ZWwiDQogIF07DQoNCiAgbGV0IGFsbEJ1YmJsZXMgPSB7fTsNCg0KICBjb25zdCB4bWxFc2NhcGUgPSBmdW5jdGlvbiAodW5zYWZlKSB7DQogICAgdW5zYWZlID0gU3RyaW5nKHVuc2FmZSk7DQogICAgcmV0dXJuIHVuc2FmZS5yZXBsYWNlKC9bPD4mJyJdL2csIGMgPT4gew0KICAgICAgc3dpdGNoIChjKSB7DQogICAgICAgIGNhc2UgIjwiOiByZXR1cm4gIiZsdDsiOw0KICAgICAgICBjYXNlICI+IjogcmV0dXJuICImZ3Q7IjsNCiAgICAgICAgY2FzZSAiJiI6IHJldHVybiAiJmFtcDsiOw0KICAgICAgICBjYXNlICInIjogcmV0dXJuICImYXBvczsiOw0KICAgICAgICBjYXNlICJcIiI6IHJldHVybiAiJnF1b3Q7IjsNCiAgICAgIH0NCiAgICB9KTsNCiAgfTsNCg0KICBjbGFzcyBzcGVlY2hTUCB7DQogICAgY29uc3RydWN0b3IoKSB7DQogICAgICBydW50aW1lLm9uKCJQUk9KRUNUX1NUQVJUIiwgKCkgPT4geyB0aGlzLnNodXRVcCh7IFNQUklURTogIl9hbGxfIiB9KSB9KTsNCiAgICAgIHJ1bnRpbWUub24oIlBST0pFQ1RfU1RPUF9BTEwiLCAoKSA9PiB7IHRoaXMuc2h1dFVwKHsgU1BSSVRFOiAiX2FsbF8iIH0pIH0pOw0KICAgICAgcnVudGltZS5vbigiQUZURVJfRVhFQ1VURSIsICgpID0+IHsNCiAgICAgICAgY29uc3QgdmFsdWVzID0gT2JqZWN0LnZhbHVlcyhhbGxCdWJibGVzKTsNCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICBjb25zdCBvYmogPSB2YWx1ZXNbaV07DQogICAgICAgICAgbGV0IHRhcmdldCA9IHJ1bnRpbWUuZ2V0VGFyZ2V0QnlJZChvYmouaWQpOw0KICAgICAgICAgIGlmICghdGFyZ2V0KSB0YXJnZXQgPSBydW50aW1lLmdldFNwcml0ZVRhcmdldEJ5TmFtZShvYmouaWQpOw0KICAgICAgICAgIGlmICghdGFyZ2V0KSBjb250aW51ZTsNCiAgICAgICAgICBsZXQgZWxlbWVudCA9IG9iai5lbGVtZW50Ow0KICAgICAgICAgIGlmICghZWxlbWVudCkgY29udGludWU7DQogICAgICAgICAgY29uc3QgY29tcHV0ZWQgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTsNCiAgICAgICAgICBjb25zdCB4ID0gb2JqLm9mZnNldFswXSAtIChwYXJzZUZsb2F0KGNvbXB1dGVkLndpZHRoKSAvIDIpOw0KICAgICAgICAgIGNvbnN0IHkgPSBvYmoub2Zmc2V0WzFdICsgKHBhcnNlRmxvYXQoY29tcHV0ZWQuaGVpZ2h0KSAvIDIpOw0KICAgICAgICAgIGxldCBjdXJUcmFuc2Zvcm0gPSBlbGVtZW50LnBhcmVudE5vZGUuc3R5bGUudHJhbnNmb3JtIHx8ICIiOw0KICAgICAgICAgIGN1clRyYW5zZm9ybSA9IGN1clRyYW5zZm9ybS5yZXBsYWNlKC90cmFuc2xhdGVcKFteKV0qXCkvZywgIiIpOw0KICAgICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5zdHlsZS50cmFuc2Zvcm0gPSBgJHtjdXJUcmFuc2Zvcm19IHRyYW5zbGF0ZSgke3RhcmdldC54ICsgeH1weCwgJHsodGFyZ2V0LnkgKyB5KSAqIC0xfXB4KWA7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0NCiAgICBnZXRJbmZvKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgaWQ6ICJzcGVlY2hTUCIsDQogICAgICAgIG5hbWU6ICJTcGVlY2ggQnViYmxlcyIsDQogICAgICAgIGNvbG9yMTogIiM5OTY2ZmYiLA0KICAgICAgICBjb2xvcjI6ICIjNzc0ZGNiIiwNCiAgICAgICAgbWVudUljb25VUkksDQogICAgICAgIGJsb2NrSWNvblVSSSwNCiAgICAgICAgYmxvY2tzOiBbDQogICAgICAgICAgeyBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxBQkVMLCB0ZXh0OiAiU3BlZWNoIiB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInNheVRoaXMiLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgdGV4dDogInNheSBbU1BFRUNIXSBob29rZWQgdG8gW1NQUklURV0iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIFNQRUVDSDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogImhlbGxvISIgfSwNCiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMiIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInNodXRVcCIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICB0ZXh0OiAidGVsbCBbU1BSSVRFXSB0byBzaHV0IHVwIiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBTUFJJVEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUUyIgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiaXNZYXBwaW5nIiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQk9PTEVBTiwNCiAgICAgICAgICAgIHRleHQ6ICJpcyBbU1BSSVRFXSB5YXBwaW5nPyIsDQogICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMyIiB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwNCiAgICAgICAgICB7IGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuTEFCRUwsIHRleHQ6ICJCdWJibGUgVGV4dCIgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJidWJibGVGb250IiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgIHRleHQ6ICJzZXQgYnViYmxlIGZvbnQgb2YgW1NQUklURV0gdG8gW0ZPTlRdIiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBGT05UOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkZPTlRTIiB9LA0KICAgICAgICAgICAgICBTUFJJVEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUUyIgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiYnViYmxlRm9udFNpemUiLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgdGV4dDogInNldCBidWJibGUgZm9udCBzaXplIG9mIFtTUFJJVEVdIHRvIFtOVU1dIiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBOVU0gOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAxNSB9LA0KICAgICAgICAgICAgICBTUFJJVEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUUyIgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiYnViYmxlQm9sZCIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICB0ZXh0OiAic2V0IGJ1YmJsZSBib2xkbmVzcyBvZiBbU1BSSVRFXSB0byBbTlVNXSIsDQogICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgTlVNIDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIG1lbnU6ICJUSElDSyIgfSwNCiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMiIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogImJ1YmJsZUFsaWduIiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgIHRleHQ6ICJzZXQgYnViYmxlIHRleHQgYWxpZ25tZW50IG9mIFtTUFJJVEVdIHRvIFtUWVBFXSIsDQogICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgVFlQRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJBTElHTk1FTlRTIiB9LA0KICAgICAgICAgICAgICBTUFJJVEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUUyIgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiYnViYmxlV2lkdGgiLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgdGV4dDogInNldCBidWJibGUgd2lkdGggb2YgW1NQUklURV0gdG8gW1dJRFRIXSIsDQogICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgV0lEVEg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDMwMCB9LA0KICAgICAgICAgICAgICBTUFJJVEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUUyIgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgeyBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxBQkVMLCB0ZXh0OiAiQnViYmxlIEZvcm1hdHRpbmciIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiYnViYmxlUGFkcyIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICB0ZXh0OiAic2V0IGJ1YmJsZSBbVFlQRV0gb2YgW1NQUklURV0gdG8gW05VTV0iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIE5VTTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMTUgfSwNCiAgICAgICAgICAgICAgVFlQRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJGT0NVUyIgfSwNCiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMiIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogImJ1YmJsZUNvbG9yIiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgIHRleHQ6ICJzZXQgYnViYmxlIFtUWVBFXSBjb2xvciBvZiBbU1BSSVRFXSB0byBbQ09MT1JdIiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBDT0xPUjogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5DT0xPUiB9LA0KICAgICAgICAgICAgICBUWVBFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkNPTE9SIiB9LA0KICAgICAgICAgICAgICBTUFJJVEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUUyIgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiYnViYmxlSW1nIiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgIHRleHQ6ICJzZXQgYnViYmxlIGltYWdlIG9mIFtTUFJJVEVdIHRvIFtVUkxdIiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBVUkw6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJodHRwczovL2V4dGVuc2lvbnMudHVyYm93YXJwLm9yZy9kYW5nby5wbmciIH0sDQogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTIiB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwNCiAgICAgICAgICAiLS0tIiwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJhcnJvd1BvcyIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICB0ZXh0OiAic2V0IGFycm93IHBvc2l0aW9uIG9mIFtTUFJJVEVdIHRvIHggW3hdIHkgW3ldIiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICB4OiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0sDQogICAgICAgICAgICAgIHk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfSwNCiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMiIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogImJ1YmJsZU9mZnNldCIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICB0ZXh0OiAic2V0IGJ1YmJsZSBvZmZzZXQgb2YgW1NQUklURV0gdG8geCBbeF0geSBbeV0iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIHg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDEwIH0sDQogICAgICAgICAgICAgIHk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDEwIH0sDQogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTIiB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJnZXRPZmZzZXQiLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwNCiAgICAgICAgICAgIHRleHQ6ICJidWJibGUgb2Zmc2V0IFtQT1NdIG9mIFtTUFJJVEVdIiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBQT1M6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiUE9TIiB9LA0KICAgICAgICAgICAgICBTUFJJVEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUUzIiIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5MQUJFTCwgdGV4dDogIkJ1YmJsZSBTdHlsaW5nIiB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInNldFN0cmV0Y2giLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgdGV4dDogInN0cmV0Y2ggW1RZUEVdIG9mIFtTUFJJVEVdIHRvIHggW3hdIHkgW3ldIiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBUWVBFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkVMRU1FTlQiIH0sDQogICAgICAgICAgICAgIHg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDIwMCB9LA0KICAgICAgICAgICAgICB5OiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAxMDAgfSwNCiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMyIiB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJzZXRHbG93IiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgIHRleHQ6ICJzZXQgZ2xvdyBvZiBbU1BSSVRFXSB0byB4IFt4XSB5IFt5XSB6IFt6XSBjb2xvciBbQ09MT1JdIiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICB4OiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0sDQogICAgICAgICAgICAgIHk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfSwNCiAgICAgICAgICAgICAgejogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogNSB9LA0KICAgICAgICAgICAgICBDT0xPUjogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5DT0xPUiB9LA0KICAgICAgICAgICAgICBTUFJJVEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUUyIgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgIi0tLSIsDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAic2V0RWZmZWN0IiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgIHRleHQ6ICJzZXQgW1RZUEVdIFtFRkZFQ1RdIG9mIFtTUFJJVEVdIHRvIFtOVU1dIiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBUWVBFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkVMRU1FTlQiIH0sDQogICAgICAgICAgICAgIEVGRkVDVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJFRkZFQ1RTIiB9LA0KICAgICAgICAgICAgICBOVU06IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDUgfSwNCiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMyIiB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJnZXRFZmZlY3QiLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwNCiAgICAgICAgICAgIHRleHQ6ICJnZXQgW0VGRkVDVF0gb2YgW1RZUEVdIGluIFtTUFJJVEVdIiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBUWVBFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkVMRU1FTlQiIH0sDQogICAgICAgICAgICAgIEVGRkVDVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJFRkZFQ1RTQUxMIiB9LA0KICAgICAgICAgICAgICBTUFJJVEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUUzIiIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInJlc2V0RWZmZWN0IiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgIHRleHQ6ICJyZXNldCBhbGwgYnViYmxlIHN0eWxpbmcgb2YgW1NQUklURV0iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTIiB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICBdLA0KICAgICAgICBtZW51czogew0KICAgICAgICAgIFRBUkdFVFM6IHsgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLCBpdGVtczogdGhpcy5nZXRUYXJnZXRzKHRydWUpIH0sDQogICAgICAgICAgVEFSR0VUUzI6IHsgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLCBpdGVtczogdGhpcy5nZXRUYXJnZXRzKGZhbHNlKSB9LA0KICAgICAgICAgIEZPTlRTOiB7IGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwgaXRlbXM6ICJhbGxGb250cyIgfSwNCiAgICAgICAgICBFRkZFQ1RTOiB7IGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwgaXRlbXM6IHRoaXMuZ2V0RWZmZWN0cyhmYWxzZSkgfSwNCiAgICAgICAgICBFRkZFQ1RTQUxMOiB7IGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwgaXRlbXM6IHRoaXMuZ2V0RWZmZWN0cyh0cnVlKSB9LA0KICAgICAgICAgIFBPUzogWyJ4IiwgInkiXSwNCiAgICAgICAgICBBTElHTk1FTlRTOiBbImxlZnQiLCAicmlnaHQiLCAiY2VudGVyIl0sDQogICAgICAgICAgQ09MT1I6IFsiYmFja2dyb3VuZCIsICJhcnJvdyIsICJ0ZXh0Il0sDQogICAgICAgICAgRUxFTUVOVDogWyJidWJibGUiLCAiYXJyb3ciXSwNCiAgICAgICAgICBGT0NVUzogWyJwYWRkaW5nIiwgImJvcmRlciByYWRpdXMiXSwNCiAgICAgICAgICBUSElDSzogWw0KICAgICAgICAgICAgeyB0ZXh0IDogInRoaWNrIiwgdmFsdWUgOiAiOTAwIiB9LA0KICAgICAgICAgICAgeyB0ZXh0IDogIm1lZGl1bSIsIHZhbHVlIDogIjYwMCIgfSwNCiAgICAgICAgICAgIHsgdGV4dCA6ICJub25lIiwgdmFsdWUgOiAiMSIgfSwNCiAgICAgICAgICBdDQogICAgICAgIH0sDQogICAgICB9Ow0KICAgIH0NCg0KICAgIGFsbEZvbnRzKCkgew0KICAgICAgY29uc3QgY3VzdG9tRm9udHMgPSBydW50aW1lLmZvbnRNYW5hZ2VyID8gcnVudGltZS5mb250TWFuYWdlci5nZXRGb250cygpLm1hcCgoaSkgPT4gKHsgdGV4dDogaS5uYW1lLCB2YWx1ZTogaS5mYW1pbHkgfSkpIDogW107DQogICAgICByZXR1cm4gWy4uLmZvbnRNZW51LCAuLi5jdXN0b21Gb250c107DQogICAgfQ0KDQogICAgZ2V0VGFyZ2V0cyhvcHRBbGwpIHsNCiAgICAgIGNvbnN0IHNwcml0ZU5hbWVzID0gW3sgdGV4dCA6ICJteXNlbGYiLCB2YWx1ZTogIl9teXNlbGZfIiB9XTsNCiAgICAgIGlmIChvcHRBbGwpIHNwcml0ZU5hbWVzLnB1c2goeyB0ZXh0IDogImFsbCBzcHJpdGVzIiwgdmFsdWU6ICJfYWxsXyIgfSk7DQogICAgICBjb25zdCB0YXJnZXRzID0gcnVudGltZS50YXJnZXRzOw0KICAgICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8IHRhcmdldHMubGVuZ3RoOyBpbmRleCsrKSB7DQogICAgICAgIGNvbnN0IHRhcmdldCA9IHRhcmdldHNbaW5kZXhdOw0KICAgICAgICBpZiAodGFyZ2V0LmlzT3JpZ2luYWwpIHNwcml0ZU5hbWVzLnB1c2goeyB0ZXh0IDogdGFyZ2V0LmdldE5hbWUoKSwgdmFsdWUgOiB0YXJnZXQuaWQgfSk7DQogICAgICB9DQogICAgICByZXR1cm4gc3ByaXRlTmFtZXMubGVuZ3RoID4gMCA/IHNwcml0ZU5hbWVzIDogWyIiXTsNCiAgICB9DQoNCiAgICBnZXRFZmZlY3RzKGVuYWJsZSkgew0KICAgICAgcmV0dXJuIFsNCiAgICAgICAgImJsdXIiLCAic2F0dXJhdGlvbiIsICJjb250cmFzdCIsDQogICAgICAgICJicmlnaHRuZXNzIiwgImh1ZSIsICJvcGFjaXR5IiwNCiAgICAgICAgInNlcGlhIiwgImludmVydCIsICJkaXJlY3Rpb24iLA0KICAgICAgICAuLi4oZW5hYmxlID8gWyJzY2FsZSB4IiwgInNjYWxlIHkiXSA6IFtdKSwNCiAgICAgICAgInNrZXcgeCIsICJza2V3IHkiDQogICAgICBdOw0KICAgIH0NCg0KICAgIHNwZWVjaCh0eHQsIGlkKSB7DQogICAgICBjb25zdCBlbmNvZGVkSWQgPSB0aGlzLm1ha2VFbmNvZGVkSUQoaWQpOw0KICAgICAgaWYgKCFlbmNvZGVkSWQpIHJldHVybjsNCiAgICAgIHRyeSB7DQogICAgICAgIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgZGl2W2lkPSJTUF9TcGVlY2gtRXh0LSR7ZW5jb2RlZElkfSJdIGRpdltpZD0idGV4dC1JRCJdYCk7DQogICAgICAgIGlmIChlbGVtZW50cy5sZW5ndGggPiAwKSBlbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7IGVsZW1lbnQuaW5uZXJIVE1MID0geG1sRXNjYXBlKHR4dCkucmVwbGFjZSgvXG4vZywgIjxicj4iKSB9KTsNCiAgICAgICAgZWxzZSB0aGlzLnNheVNwZWVjaCh0eHQsIGVuY29kZWRJZCwgaWQpOw0KICAgICAgfSBjYXRjaCB7IHJldHVybiB9DQogICAgfQ0KDQogICAgc2F5U3BlZWNoKHR4dCwgZW5jb2RlZElkLCBpZCkgew0KICAgICAgaWYgKCFhbGxCdWJibGVzW2VuY29kZWRJZF0pIHRoaXMuYWRkRGVmYXVsdChpZCk7DQogICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAgIGNvbnN0IHR4dFBhcmVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgY29uc3Qgc3R5bGVzID0gYWxsQnViYmxlc1tlbmNvZGVkSWRdLnN0eWxlczsNCiAgICAgIE9iamVjdC5hc3NpZ24odHh0UGFyZW50LnN0eWxlLCBzdHlsZXMpOw0KDQogICAgICBjb25zdCB0ZXh0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAgIHRleHRFbC5pZCA9ICJ0ZXh0LUlEIjsNCiAgICAgIHRleHRFbC5pbm5lckhUTUwgPSB4bWxFc2NhcGUodHh0KS5yZXBsYWNlKC9cbi9nLCAiPGJyPiIpOw0KICAgICAgdHh0UGFyZW50LmFwcGVuZENoaWxkKHRleHRFbCk7DQoNCiAgICAgIGNvbnN0IGFycm93RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgYXJyb3dFbGVtZW50LmlkID0gImFycm93LUlEIjsNCiAgICAgIGNvbnN0IGFycm93U3R5bGVzID0gYWxsQnViYmxlc1tlbmNvZGVkSWRdLmFycm93U3R5bGVzOw0KICAgICAgT2JqZWN0LmFzc2lnbihhcnJvd0VsZW1lbnQuc3R5bGUsIGFycm93U3R5bGVzKTsNCg0KICAgICAgdHh0UGFyZW50LmFwcGVuZENoaWxkKGFycm93RWxlbWVudCk7DQogICAgICB0eHRQYXJlbnQuaWQgPSBgU1BfU3BlZWNoLUV4dC0ke2VuY29kZWRJZH1gOw0KICAgICAgdHh0UGFyZW50LmNsYXNzTGlzdC5hZGQoZW5jb2RlZElkKTsNCiAgICAgIGRpdi5hcHBlbmRDaGlsZCh0eHRQYXJlbnQpOw0KICAgICAgcmVuZGVyLmFkZE92ZXJsYXkoZGl2LCAic2NhbGUtY2VudGVyZWQiKTsNCiAgICAgIGFsbEJ1YmJsZXNbZW5jb2RlZElkXS5lbGVtZW50ID0gdHh0UGFyZW50Ow0KICAgIH0NCg0KICAgIGFkZERlZmF1bHQoaWQpIHsNCiAgICAgIGNvbnN0IGVuY29kZWRJZCA9IHRoaXMubWFrZUVuY29kZWRJRChpZCk7DQogICAgICBpZiAoIWVuY29kZWRJZCkgcmV0dXJuOw0KICAgICAgYWxsQnViYmxlc1tlbmNvZGVkSWRdID0gew0KICAgICAgICBpZCwgb2Zmc2V0OiBbNzUsIDBdLA0KICAgICAgICBzdHlsZXM6IHsNCiAgICAgICAgICB3aWR0aDogIjE1MHB4IiwNCiAgICAgICAgICBiYWNrZ3JvdW5kOiAiIzAwYmZiNiIsDQogICAgICAgICAgYmFja2dyb3VuZFNpemU6ICJjb3ZlciIsDQogICAgICAgICAgcGFkZGluZzogIjEwcHgiLA0KICAgICAgICAgIGJvcmRlclJhZGl1czogIjEycHgiLA0KICAgICAgICAgIHRleHRBbGlnbjogImNlbnRlciIsDQogICAgICAgICAgZm9udFdlaWdodDogIjkwMCIsDQogICAgICAgICAgZm9udFNpemU6ICIxNXB4IiwNCiAgICAgICAgICBjb2xvcjogIiNmZmYiLA0KICAgICAgICAgIGZvbnRGYW1pbHk6ICJhcmlhbCIsDQogICAgICAgICAgcG9zaXRpb246ICJyZWxhdGl2ZSIsDQogICAgICAgICAgcG9pbnRlckV2ZW50czogIm5vbmUiLA0KICAgICAgICAgIGJveFNoYWRvdzogIjBweCAwcHggMHB4ICMwMDAwMDAwMCIsDQogICAgICAgICAgdHJhbnNmb3JtOiAic2NhbGUoMSwxKSBza2V3WCgwZGVnKSBza2V3WSgwZGVnKSByb3RhdGUoMGRlZykiLA0KICAgICAgICAgIGZpbHRlcjogImJsdXIoMHB4KSBicmlnaHRuZXNzKDEpIGNvbnRyYXN0KDEpIGh1ZS1yb3RhdGUoMGRlZykgaW52ZXJ0KDApIG9wYWNpdHkoMSkgc2F0dXJhdGUoMSkgc2VwaWEoMCkiDQogICAgICAgIH0sDQogICAgICAgIGFycm93U3R5bGVzOiB7DQogICAgICAgICAgcG9zaXRpb246ICJhYnNvbHV0ZSIsDQogICAgICAgICAgd2lkdGg6ICIwcHgiLA0KICAgICAgICAgIGhlaWdodDogIjBweCIsDQogICAgICAgICAgYm9yZGVyTGVmdDogIjEwcHggc29saWQgIzAwYmZiNiIsDQogICAgICAgICAgYm9yZGVyUmlnaHQ6ICIxMHB4IHNvbGlkIHRyYW5zcGFyZW50IiwNCiAgICAgICAgICBib3JkZXJUb3A6ICIxMHB4IHNvbGlkICMwMGJmYjYiLA0KICAgICAgICAgIGJvcmRlckJvdHRvbTogIjEwcHggc29saWQgdHJhbnNwYXJlbnQiLA0KICAgICAgICAgIGxlZnQ6ICItMTBweCIsDQogICAgICAgICAgdG9wOiAiLTEwcHgiLA0KICAgICAgICAgIHRyYW5zZm9ybTogInNjYWxlKDEsMSkgc2tld1goMGRlZykgc2tld1koMGRlZykgcm90YXRlKDBkZWcpIiwNCiAgICAgICAgICBmaWx0ZXI6ICJibHVyKDBweCkgYnJpZ2h0bmVzcygxKSBjb250cmFzdCgxKSBodWUtcm90YXRlKDBkZWcpIGludmVydCgwKSBvcGFjaXR5KDEpIHNhdHVyYXRlKDEpIHNlcGlhKDApIg0KICAgICAgICB9DQogICAgICB9Ow0KICAgIH0NCg0KICAgIHNldEJ1YmJsZUF0dCh0eXBlLCB2YWx1ZSwgaWQsIGZvY3VzKSB7DQogICAgICBjb25zdCBhcHBseVVwZGF0ZSA9IChrZXkpID0+IHsNCiAgICAgICAgY29uc3QgZW5jb2RlZElkID0gdGhpcy5tYWtlRW5jb2RlZElEKGlkKTsNCiAgICAgICAgaWYgKCFlbmNvZGVkSWQpIHJldHVybjsNCiAgICAgICAgaWYgKCFhbGxCdWJibGVzW2VuY29kZWRJZF0pIHRoaXMuYWRkRGVmYXVsdChpZCk7DQogICAgICAgIGFsbEJ1YmJsZXNbZW5jb2RlZElkXVtmb2N1c11bdHlwZV0gPSB2YWx1ZTsNCiAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50KGVuY29kZWRJZCwgYWxsQnViYmxlc1tlbmNvZGVkSWRdKTsNCiAgICAgIH07DQogICAgICBpZiAoaWQgIT09ICJfYWxsXyIpIGFwcGx5VXBkYXRlKGlkKTsNCiAgICAgIGVsc2Ugew0KICAgICAgICBjb25zdCBsaXN0ID0gdGhpcy5nZXRUYXJnZXRzKGZhbHNlKTsNCiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSBhcHBseVVwZGF0ZShsaXN0W2ldLnZhbHVlKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICB1cGRhdGVFbGVtZW50KGlkLCBvYmopIHsNCiAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBkaXZbaWQ9IlNQX1NwZWVjaC1FeHQtJHtpZH0iXWApOw0KICAgICAgaWYgKCFlbGVtZW50KSByZXR1cm47DQogICAgICBPYmplY3QuYXNzaWduKGVsZW1lbnQuc3R5bGUsIG9iai5zdHlsZXMpOw0KICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBvYmouc3R5bGVzLnRyYW5zZm9ybTsNCiAgICAgIGVsZW1lbnQuc3R5bGUuZmlsdGVyID0gb2JqLnN0eWxlcy5maWx0ZXI7DQogICAgICBjb25zdCBhcnJvd0VsZW1lbnQgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYGRpdltpZD0iYXJyb3ctSUQiXWApOw0KICAgICAgT2JqZWN0LmFzc2lnbihhcnJvd0VsZW1lbnQuc3R5bGUsIG9iai5hcnJvd1N0eWxlcyk7DQogICAgICBhcnJvd0VsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gb2JqLmFycm93U3R5bGVzLnRyYW5zZm9ybTsNCiAgICAgIGFycm93RWxlbWVudC5zdHlsZS5maWx0ZXIgPSBvYmouYXJyb3dTdHlsZXMuZmlsdGVyOw0KICAgIH0NCg0KICAgIGdldFRhcmdldElkKHR4dCwgdXRpbCwgYWxsb3dBbGwpIHsNCiAgICAgIGlmICh0eHQgPT09ICJfYWxsXyIgJiYgYWxsb3dBbGwpIHJldHVybiAiX2FsbF8iOw0KICAgICAgZWxzZSBpZiAodHh0ID09PSAiX215c2VsZl8iKSByZXR1cm4gdXRpbC50YXJnZXQuaWQ7DQogICAgICBlbHNlIHsNCiAgICAgICAgY29uc3QgaWRUYXJnID0gcnVudGltZS5nZXRUYXJnZXRCeUlkKHR4dCk7DQogICAgICAgIGlmIChpZFRhcmcgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGlkVGFyZy5pZDsNCiAgICAgICAgcmV0dXJuIHJ1bnRpbWUuZ2V0U3ByaXRlVGFyZ2V0QnlOYW1lKHR4dCk/LmlkIHx8IHVuZGVmaW5lZDsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBtYWtlRW5jb2RlZElEKGlkKSB7DQogICAgICBpZiAoaWQgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHVuZGVmaW5lZDsNCiAgICAgIHRyeSB7DQogICAgICAgIHJldHVybiBidG9hKGlkKS5yZXBsYWNlQWxsKCI9IiwgIl8iKS5yZXBsYWNlQWxsKCIvIiwgIi0iKTsNCiAgICAgIH0gY2F0Y2ggew0KICAgICAgICByZXR1cm4gdW5kZWZpbmVkOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8vU3BlZWNoDQogICAgc2F5VGhpcyhhcmdzLCB1dGlsKSB7DQogICAgICBjb25zdCBpZCA9IHRoaXMuZ2V0VGFyZ2V0SWQoYXJncy5TUFJJVEUsIHV0aWwsIHRydWUpOw0KICAgICAgaWYgKGlkICE9PSAiX2FsbF8iKSB0aGlzLnNwZWVjaChhcmdzLlNQRUVDSCwgaWQpOw0KICAgICAgZWxzZSB7DQogICAgICAgIGNvbnN0IGxpc3QgPSB0aGlzLmdldFRhcmdldHMoZmFsc2UpOw0KICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHRoaXMuc3BlZWNoKGFyZ3MuU1BFRUNILCBsaXN0W2ldLnZhbHVlKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBzaHV0VXAoYXJncywgdXRpbCkgew0KICAgICAgY29uc3QgaWQgPSB0aGlzLmdldFRhcmdldElkKGFyZ3MuU1BSSVRFLCB1dGlsLCB0cnVlKTsNCiAgICAgIGNvbnN0IGVuY29kZWRJZCA9IHRoaXMubWFrZUVuY29kZWRJRChpZCk7DQogICAgICBpZiAoIWVuY29kZWRJZCkgcmV0dXJuOw0KICAgICAgY29uc3Qgc2h1dFRhcmdldCA9IChrZXkpID0+IHsNCiAgICAgICAgY29uc3QgcmVtb3ZhYmxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYGRpdltpZD0iU1BfU3BlZWNoLUV4dC0ke2tleX0iXWApOw0KICAgICAgICByZW1vdmFibGVzLmZvckVhY2goKGVsZW1lbnQpID0+IHJlbmRlci5yZW1vdmVPdmVybGF5KGVsZW1lbnQucGFyZW50Tm9kZSkpOw0KICAgICAgfTsNCiAgICAgIGlmIChpZCA9PT0gIl9hbGxfIikgT2JqZWN0LmtleXMoYWxsQnViYmxlcykuZm9yRWFjaChzaHV0VGFyZ2V0KTsNCiAgICAgIGVsc2Ugc2h1dFRhcmdldChlbmNvZGVkSWQpOw0KICAgIH0NCg0KICAgIGlzWWFwcGluZyhhcmdzLCB1dGlsKSB7DQogICAgICBsZXQgaWQgPSB0aGlzLmdldFRhcmdldElkKGFyZ3MuU1BSSVRFLCB1dGlsLCBmYWxzZSk7DQogICAgICBpZCA9IHRoaXMubWFrZUVuY29kZWRJRChpZCk7DQogICAgICBpZiAoIWlkKSByZXR1cm4gZmFsc2U7DQogICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgZGl2W2lkPSJTUF9TcGVlY2gtRXh0LSR7aWR9Il1gKSAhPT0gbnVsbDsNCiAgICB9DQoNCiAgICAvL1Bvc2l0aW9ucw0KICAgIGJ1YmJsZU9mZnNldChhcmdzLCB1dGlsKSB7DQogICAgICBjb25zdCBpZCA9IHRoaXMuZ2V0VGFyZ2V0SWQoYXJncy5TUFJJVEUsIHV0aWwsIHRydWUpOw0KICAgICAgY29uc3QgZW5jb2RlZElkID0gdGhpcy5tYWtlRW5jb2RlZElEKGlkKTsNCiAgICAgIGlmICghZW5jb2RlZElkKSByZXR1cm47DQogICAgICBpZiAoIWFsbEJ1YmJsZXNbZW5jb2RlZElkXSkgdGhpcy5hZGREZWZhdWx0KGlkKTsNCiAgICAgIGNvbnN0IHNldE9mZiA9IChrZXkpID0+IHsNCiAgICAgICAgYWxsQnViYmxlc1trZXldLm9mZnNldCA9IFtTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy54KSwgU2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MueSldOw0KICAgICAgfTsNCiAgICAgIGlmIChpZCA9PT0gIl9hbGxfIikgT2JqZWN0LmtleXMoYWxsQnViYmxlcykuZm9yRWFjaChzZXRPZmYpOw0KICAgICAgZWxzZSBzZXRPZmYoZW5jb2RlZElkKTsNCiAgICB9DQoNCiAgICBnZXRPZmZzZXQoYXJncywgdXRpbCkgew0KICAgICAgbGV0IGlkID0gdGhpcy5nZXRUYXJnZXRJZChhcmdzLlNQUklURSwgdXRpbCwgZmFsc2UpOw0KICAgICAgaWQgPSB0aGlzLm1ha2VFbmNvZGVkSUQoaWQpOw0KICAgICAgaWYgKCFpZCkgcmV0dXJuIDA7DQogICAgICByZXR1cm4gYWxsQnViYmxlc1tpZF0/Lm9mZnNldFthcmdzLlBPUyA9PT0gIngiID8gMCA6IDFdIHx8IDA7DQogICAgfQ0KDQogICAgLy9DdXN0b21pemF0aW9uDQogICAgYnViYmxlV2lkdGgoYXJncywgdXRpbCkgew0KICAgICAgdGhpcy5zZXRCdWJibGVBdHQoDQogICAgICAgICJ3aWR0aCIsIGAke01hdGguYWJzKFNjcmF0Y2guQ2FzdC50b051bWJlcihhcmdzLldJRFRIKSl9cHhgLA0KICAgICAgICB0aGlzLmdldFRhcmdldElkKGFyZ3MuU1BSSVRFLCB1dGlsLCB0cnVlKSwgInN0eWxlcyINCiAgICAgICk7DQogICAgfQ0KDQogICAgYnViYmxlUGFkcyhhcmdzLCB1dGlsKSB7DQogICAgICB0aGlzLnNldEJ1YmJsZUF0dCgNCiAgICAgICAgYXJncy5UWVBFID09PSAicGFkZGluZyIgPyAicGFkZGluZyIgOiAiYm9yZGVyUmFkaXVzIiwgDQogICAgICAgIGAke1NjcmF0Y2guQ2FzdC50b051bWJlcihhcmdzLk5VTSl9cHhgLCB0aGlzLmdldFRhcmdldElkKGFyZ3MuU1BSSVRFLCB1dGlsLCB0cnVlKSwNCiAgICAgICAgInN0eWxlcyINCiAgICAgICk7DQogICAgfQ0KDQogICAgYnViYmxlRm9udChhcmdzLCB1dGlsKSB7DQogICAgICB0aGlzLnNldEJ1YmJsZUF0dCgNCiAgICAgICAgImZvbnRGYW1pbHkiLCBhcmdzLkZPTlQsIHRoaXMuZ2V0VGFyZ2V0SWQoYXJncy5TUFJJVEUsIHV0aWwsIHRydWUpLCAic3R5bGVzIg0KICAgICAgKTsNCiAgICB9DQoNCiAgICBidWJibGVGb250U2l6ZShhcmdzLCB1dGlsKSB7DQogICAgICB0aGlzLnNldEJ1YmJsZUF0dCgNCiAgICAgICAgImZvbnRTaXplIiwgYCR7TWF0aC5hYnMoU2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MuTlVNKSl9cHhgLA0KICAgICAgICB0aGlzLmdldFRhcmdldElkKGFyZ3MuU1BSSVRFLCB1dGlsLCB0cnVlKSwgInN0eWxlcyINCiAgICAgICk7DQogICAgfQ0KDQogICAgYnViYmxlQm9sZChhcmdzLCB1dGlsKSB7DQogICAgICB0aGlzLnNldEJ1YmJsZUF0dCgNCiAgICAgICAgImZvbnRXZWlnaHQiLCBhcmdzLk5VTSwgdGhpcy5nZXRUYXJnZXRJZChhcmdzLlNQUklURSwgdXRpbCwgdHJ1ZSksICJzdHlsZXMiDQogICAgICApOw0KICAgIH0NCg0KICAgIGJ1YmJsZUFsaWduKGFyZ3MsIHV0aWwpIHsNCiAgICAgIHRoaXMuc2V0QnViYmxlQXR0KA0KICAgICAgICAidGV4dEFsaWduIiwgYXJncy5UWVBFLCB0aGlzLmdldFRhcmdldElkKGFyZ3MuU1BSSVRFLCB1dGlsLCB0cnVlKSwgInN0eWxlcyINCiAgICAgICk7DQogICAgfQ0KDQogICAgYnViYmxlQ29sb3IoYXJncywgdXRpbCkgew0KICAgICAgaWYgKGFyZ3MuVFlQRSA9PT0gImFycm93Iikgew0KICAgICAgICB0aGlzLnNldEJ1YmJsZUF0dCgNCiAgICAgICAgICAiYm9yZGVyTGVmdCIsIGAxMHB4IHNvbGlkICR7YXJncy5DT0xPUn1gLA0KICAgICAgICAgIHRoaXMuZ2V0VGFyZ2V0SWQoYXJncy5TUFJJVEUsIHV0aWwsIHRydWUpLCAiYXJyb3dTdHlsZXMiDQogICAgICAgICk7DQogICAgICAgIHRoaXMuc2V0QnViYmxlQXR0KA0KICAgICAgICAgICJib3JkZXJUb3AiLCBgMTBweCBzb2xpZCAke2FyZ3MuQ09MT1J9YCwNCiAgICAgICAgICB0aGlzLmdldFRhcmdldElkKGFyZ3MuU1BSSVRFLCB1dGlsLCB0cnVlKSwgImFycm93U3R5bGVzIg0KICAgICAgICApOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5zZXRCdWJibGVBdHQoDQogICAgICAgICAgYXJncy5UWVBFID09PSAiYmFja2dyb3VuZCIgPyAiYmFja2dyb3VuZCIgOiAiY29sb3IiLCBhcmdzLkNPTE9SLA0KICAgICAgICAgIHRoaXMuZ2V0VGFyZ2V0SWQoYXJncy5TUFJJVEUsIHV0aWwsIHRydWUpLCAic3R5bGVzIg0KICAgICAgICApOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIGJ1YmJsZUltZyhhcmdzLCB1dGlsKSB7DQogICAgICBTY3JhdGNoLmNhbkZldGNoKGVuY29kZVVSSShhcmdzLlVSTCkpLnRoZW4oKGNhbkZldGNoKSA9PiB7DQogICAgICAgIGlmIChjYW5GZXRjaCkgew0KICAgICAgICAgIHRoaXMuc2V0QnViYmxlQXR0KA0KICAgICAgICAgICAgImJhY2tncm91bmQiLCBgdXJsKCR7ZW5jb2RlVVJJKGFyZ3MuVVJMKX0pYCwNCiAgICAgICAgICAgIHRoaXMuZ2V0VGFyZ2V0SWQoYXJncy5TUFJJVEUsIHV0aWwsIHRydWUpLCAic3R5bGVzIg0KICAgICAgICAgICk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0NCg0KICAgIGFycm93UG9zKGFyZ3MsIHV0aWwpIHsNCiAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuZ2V0VGFyZ2V0SWQoYXJncy5TUFJJVEUsIHV0aWwsIHRydWUpOw0KICAgICAgdGhpcy5zZXRCdWJibGVBdHQoImxlZnQiLCBgJHtTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy54KX1weGAsIHRhcmdldCwgImFycm93U3R5bGVzIik7DQogICAgICB0aGlzLnNldEJ1YmJsZUF0dCgidG9wIiwgYCR7U2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MueSkgKiAtMX1weGAsIHRhcmdldCwgImFycm93U3R5bGVzIik7DQogICAgfQ0KDQogICAgc2V0U3RyZXRjaChhcmdzLCB1dGlsKSB7DQogICAgICBjb25zdCBpZCA9IHRoaXMuZ2V0VGFyZ2V0SWQoYXJncy5TUFJJVEUsIHV0aWwsIGZhbHNlKTsNCiAgICAgIGNvbnN0IGVuY29kZWRJZCA9IHRoaXMubWFrZUVuY29kZWRJRChpZCk7DQogICAgICBpZiAoIWVuY29kZWRJZCkgcmV0dXJuOw0KICAgICAgaWYgKCFhbGxCdWJibGVzW2VuY29kZWRJZF0pIHRoaXMuYWRkRGVmYXVsdChpZCk7DQogICAgICBsZXQgZWxlbWVudCA9IGFsbEJ1YmJsZXNbZW5jb2RlZElkXS5lbGVtZW50Ow0KICAgICAgaWYgKCFlbGVtZW50KSByZXR1cm47DQogICAgICBjb25zdCBzZXR0ZXIgPSBhcmdzLlRZUEUgPT09ICJhcnJvdyIgPyBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYGRpdltpZD0iYXJyb3ctSUQiXWApIDogZWxlbWVudDsNCiAgICAgIGxldCBjdXJUcmFuc2Zvcm0gPSBzZXR0ZXIuc3R5bGUudHJhbnNmb3JtIHx8ICIiOw0KICAgICAgY3VyVHJhbnNmb3JtID0gY3VyVHJhbnNmb3JtLnJlcGxhY2UoL3NjYWxlXChbXildKlwpL2csICIiKTsNCiAgICAgIGNvbnN0IHZhbHVlID0gYHNjYWxlKCR7U2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MueCkgLyAxMDB9LCR7U2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MueSkgLyAxMDB9KWA7DQogICAgICBzZXR0ZXIuc3R5bGUudHJhbnNmb3JtID0gYCR7Y3VyVHJhbnNmb3JtfSAke3ZhbHVlfWA7DQogICAgICB0aGlzLnNldEJ1YmJsZUF0dCgNCiAgICAgICAgInRyYW5zZm9ybSIsIChgJHtjdXJUcmFuc2Zvcm19ICR7dmFsdWV9YCkudHJpbSgpLCBpZCwNCiAgICAgICAgYXJncy5UWVBFID09PSAiYXJyb3ciID8gImFycm93U3R5bGVzIiA6ICJzdHlsZXMiDQogICAgICApOw0KICAgIH0NCg0KICAgIHNldEdsb3coYXJncywgdXRpbCkgew0KICAgICAgY29uc3QgaWQgPSB0aGlzLmdldFRhcmdldElkKGFyZ3MuU1BSSVRFLCB1dGlsLCB0cnVlKTsNCiAgICAgIGNvbnN0IGVuY29kZWRJZCA9IHRoaXMubWFrZUVuY29kZWRJRChpZCk7DQogICAgICBpZiAoIWVuY29kZWRJZCkgcmV0dXJuOw0KICAgICAgY29uc3QgY29sb3IgPSBhcmdzLnogPT09IDAgPyAibm9uZSIgOiBgJHthcmdzLnh9cHggJHthcmdzLnkgKiAtMX1weCAke2FyZ3Muen1weCAke2FyZ3MuQ09MT1J9YDsNCiAgICAgIGNvbnN0IGFwcGx5R2xvdyA9IChrZXkpID0+IHsNCiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBkaXZbaWQ9IlNQX1NwZWVjaC1FeHQtJHtrZXl9Il1gKTsNCiAgICAgICAgZWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4gew0KICAgICAgICAgIGVsZW1lbnQuc3R5bGUuYm94U2hhZG93ID0gY29sb3I7DQogICAgICAgICAgYWxsQnViYmxlc1trZXldLnN0eWxlcy5ib3hTaGFkb3cgPSBjb2xvcjsNCiAgICAgICAgfSk7DQogICAgICB9Ow0KICAgICAgaWYgKGlkID09PSAiX2FsbF8iKSBPYmplY3Qua2V5cyhhbGxCdWJibGVzKS5mb3JFYWNoKGFwcGx5R2xvdyk7DQogICAgICBlbHNlIGFwcGx5R2xvdyhlbmNvZGVkSWQpOw0KICAgIH0NCg0KICAgIHNldEVmZmVjdChhcmdzLCB1dGlsKSB7DQogICAgICBjb25zdCBpZCA9IHRoaXMuZ2V0VGFyZ2V0SWQoYXJncy5TUFJJVEUsIHV0aWwsIGZhbHNlKTsNCiAgICAgIGNvbnN0IGVuY29kZWRJZCA9IHRoaXMubWFrZUVuY29kZWRJRChpZCk7DQogICAgICBpZiAoIWVuY29kZWRJZCkgcmV0dXJuOw0KICAgICAgaWYgKCFhbGxCdWJibGVzW2VuY29kZWRJZF0pIHRoaXMuYWRkRGVmYXVsdChpZCk7DQogICAgICBsZXQgZWxlbWVudCA9IGFsbEJ1YmJsZXNbZW5jb2RlZElkXS5lbGVtZW50Ow0KICAgICAgaWYgKCFlbGVtZW50KSByZXR1cm47DQogICAgICBpZiAoYXJncy5UWVBFID09PSAiYXJyb3ciKSBlbGVtZW50ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKGBkaXZbaWQ9ImFycm93LUlEIl1gKTsNCiAgICAgIGxldCBlZmZlY3QgPSBTY3JhdGNoLkNhc3QudG9TdHJpbmcoYXJncy5FRkZFQ1QpLnJlcGxhY2VBbGwoIiAiLCAiIik7DQogICAgICBsZXQgdGVybSA9ICIiOw0KICAgICAgY29uc3Qgc291cmNlID0gZWZmZWN0LmluY2x1ZGVzKCJza2V3IikgfHwgZWZmZWN0ID09PSAiZGlyZWN0aW9uIiA/ICJ0cmFuc2Zvcm0iIDogImZpbHRlciI7DQogICAgICBpZiAoZWZmZWN0ID09PSAiYmx1ciIpIHRlcm0gPSAicHgiOw0KICAgICAgZWxzZSBpZiAoZWZmZWN0ID09PSAic2F0dXJhdGlvbiIpIGVmZmVjdCA9ICJzYXR1cmF0ZSI7DQogICAgICBlbHNlIGlmIChlZmZlY3QgPT09ICJodWUiKSB7IGVmZmVjdCA9ICJodWUtcm90YXRlIjsgdGVybSA9ICJkZWciIH0NCiAgICAgIGVsc2UgaWYgKGVmZmVjdCA9PT0gImRpcmVjdGlvbiIpIHsgZWZmZWN0ID0gInJvdGF0ZSI7IHRlcm0gPSAiZGVnIiB9DQogICAgICBlbHNlIGlmIChlZmZlY3QgPT09ICJza2V3eCIpIHsgZWZmZWN0ID0gInNrZXdYIjsgdGVybSA9ICJkZWciIH0NCiAgICAgIGVsc2UgaWYgKGVmZmVjdCA9PT0gInNrZXd5IikgeyBlZmZlY3QgPSAic2tld1kiOyB0ZXJtID0gImRlZyIgfQ0KICAgICAgbGV0IHZhbHVlID0gU2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MuTlVNKTsNCiAgICAgIGlmIChlZmZlY3QgPT09ICJzYXR1cmF0ZSIgfHwgZWZmZWN0ID09PSAiaW52ZXJ0IiB8fCBlZmZlY3QgPT09ICJzZXBpYSIpIHZhbHVlID0gdmFsdWUgLyAxMDA7DQogICAgICBlbHNlIGlmIChlZmZlY3QgPT09ICJjb250cmFzdCIgfHwgZWZmZWN0ID09PSAiYnJpZ2h0bmVzcyIpIHZhbHVlID0gKHZhbHVlICsgMTAwKSAvIDEwMDsNCiAgICAgIGVsc2UgaWYgKGVmZmVjdCA9PT0gIm9wYWNpdHkiKSB2YWx1ZSA9ICgxMDAgLSB2YWx1ZSkgLyAxMDA7DQogICAgICBlbHNlIGlmIChlZmZlY3QgPT09ICJyb3RhdGUiKSB2YWx1ZSA9IHZhbHVlIC0gOTA7DQogICAgICB2YWx1ZSA9IGAke2VmZmVjdH0oJHt2YWx1ZX0ke3Rlcm19KWA7DQoNCiAgICAgIGNvbnN0IHNldHRlciA9IGVmZmVjdC5pbmNsdWRlcygic2tldyIpID8gZWxlbWVudC5wYXJlbnROb2RlIDogZWxlbWVudDsNCiAgICAgIGxldCBjdXJTb3VyY2UgPSBzZXR0ZXIuc3R5bGVbc291cmNlXSB8fCAiIjsNCiAgICAgIGN1clNvdXJjZSA9IGN1clNvdXJjZS5yZXBsYWNlKG5ldyBSZWdFeHAoYCR7ZWZmZWN0fVxcKFteKV0qXFwpYCwgImciKSwgIiIpOw0KICAgICAgc2V0dGVyLnN0eWxlW3NvdXJjZV0gPSBgJHtjdXJTb3VyY2V9ICR7dmFsdWV9YDsNCiAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gImNlbnRlciI7DQogICAgICBpZiAoIWVmZmVjdC5pbmNsdWRlcygic2tldyIpKSB0aGlzLnNldEJ1YmJsZUF0dCgNCiAgICAgICAgc291cmNlLCAoYCR7Y3VyU291cmNlfSAke3ZhbHVlfWApLnRyaW0oKSwgaWQsIGFyZ3MuVFlQRSA9PT0gImFycm93IiA/ICJhcnJvd1N0eWxlcyIgOiAic3R5bGVzIg0KICAgICAgKTsNCiAgICB9DQoNCiAgICBnZXRFZmZlY3QoYXJncywgdXRpbCkgew0KICAgICAgbGV0IGVmZmVjdCA9IFNjcmF0Y2guQ2FzdC50b1N0cmluZyhhcmdzLkVGRkVDVCkucmVwbGFjZUFsbCgiICIsICIiKTsNCiAgICAgIGlmIChlZmZlY3QgPT09ICJzYXR1cmF0aW9uIikgZWZmZWN0ID0gInNhdHVyYXRlIjsNCiAgICAgIGlmIChlZmZlY3QgPT09ICJodWUiKSBlZmZlY3QgPSAiaHVlLXJvdGF0ZSI7DQogICAgICBpZiAoZWZmZWN0ID09PSAiZGlyZWN0aW9uIikgZWZmZWN0ID0gInJvdGF0ZSI7DQogICAgICBjb25zdCBpZCA9IHRoaXMuZ2V0VGFyZ2V0SWQoYXJncy5TUFJJVEUsIHV0aWwsIGZhbHNlKTsNCiAgICAgIGNvbnN0IGVuY29kZWRJZCA9IHRoaXMubWFrZUVuY29kZWRJRChpZCk7DQogICAgICBpZiAoIWVuY29kZWRJZCkgcmV0dXJuOw0KICAgICAgaWYgKCFhbGxCdWJibGVzW2VuY29kZWRJZF0pIHRoaXMuYWRkRGVmYXVsdChpZCk7DQogICAgICBsZXQgcGF0aCA9IGFsbEJ1YmJsZXNbZW5jb2RlZElkXVthcmdzLlRZUEUgPT09ICJhcnJvdyIgPyAiYXJyb3dTdHlsZXMiIDogInN0eWxlcyJdOw0KICAgICAgcGF0aCA9IHBhdGhbZWZmZWN0LmluY2x1ZGVzKCJzY2FsZSIpIHx8IGVmZmVjdC5pbmNsdWRlcygic2tldyIpIHx8IGVmZmVjdCA9PT0gInJvdGF0ZSIgPyAidHJhbnNmb3JtIiA6ICJmaWx0ZXIiXTsNCiAgICAgIGNvbnN0IGZpbHRlclByb3BzID0gcGF0aC5tYXRjaCgvW1x3LV0rXChbXildK1wpL2cpIHx8IFtdOw0KICAgICAgY29uc3QgZmlsdGVyT2JqID0ge307DQogICAgICBmaWx0ZXJQcm9wcy5mb3JFYWNoKHByb3BlcnR5ID0+IHsNCiAgICAgICAgY29uc3QgW25hbWUsIHZhbHVlXSA9IHByb3BlcnR5LnNwbGl0KCIoIik7DQogICAgICAgIGZpbHRlck9ialtuYW1lLnRvTG93ZXJDYXNlKCldID0gdmFsdWUucmVwbGFjZSgvXCkkLywgIiIpOw0KICAgICAgfSk7DQogICAgICB0cnkgew0KICAgICAgICBpZiAoZWZmZWN0LmluY2x1ZGVzKCJzY2FsZSIpKSB7DQogICAgICAgICAgY29uc3QgdmFsdWUgPSBmaWx0ZXJPYmpbInNjYWxlIl0uc3BsaXQoIiwiKTsNCiAgICAgICAgICByZXR1cm4gdmFsdWVbZWZmZWN0LmluY2x1ZGVzKCJ4IikgPyAwIDogMV0gKiAxMDA7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgbGV0IG51bWJlciA9IFNjcmF0Y2guQ2FzdC50b051bWJlcihmaWx0ZXJPYmpbZWZmZWN0XS5yZXBsYWNlKCJweCIsICIiKS5yZXBsYWNlKCJkZWciLCAiIikpOw0KICAgICAgICAgIGlmIChlZmZlY3QgPT09ICJzYXR1cmF0ZSIgfHwgZWZmZWN0ID09PSAiaW52ZXJ0IiB8fCBlZmZlY3QgPT09ICJzZXBpYSIpIG51bWJlciA9IG51bWJlciAqIDEwMDsNCiAgICAgICAgICBlbHNlIGlmIChlZmZlY3QgPT09ICJjb250cmFzdCIgfHwgZWZmZWN0ID09PSAiYnJpZ2h0bmVzcyIpIG51bWJlciA9IG51bWJlciAqIDEwMCAtIDEwMDsNCiAgICAgICAgICBlbHNlIGlmIChlZmZlY3QgPT09ICJvcGFjaXR5IikgbnVtYmVyID0gKG51bWJlciAqIC0xMDApICsgMTAwOw0KICAgICAgICAgIGVsc2UgaWYgKGVmZmVjdCA9PT0gInJvdGF0ZSIpIG51bWJlciA9IG51bWJlciArIDkwOw0KICAgICAgICAgIHJldHVybiBudW1iZXI7DQogICAgICAgIH0NCiAgICAgIH0gY2F0Y2ggeyByZXR1cm4gIiIgfQ0KICAgIH0NCg0KICAgIHJlc2V0RWZmZWN0KGFyZ3MsIHV0aWwpIHsNCiAgICAgIGNvbnN0IGVmZmVjdHMgPSB0aGlzLmdldEVmZmVjdHMoZmFsc2UpOw0KICAgICAgY29uc3QgZGVmYXVsdFZhbHMgPSBbMCwgMTAwLCAwLCAwLCAwLCAwLCAwLCAwLCA5MCwgMCwgMF07DQogICAgICBjb25zdCBpZCA9IHRoaXMuZ2V0VGFyZ2V0SWQoYXJncy5TUFJJVEUsIHV0aWwsIHRydWUpOw0KICAgICAgY29uc3QgcmVzZXRlciA9IChvYmopID0+IHsNCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZWZhdWx0VmFscy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIHRoaXMuc2V0RWZmZWN0KHsgVFlQRSA6ICJidWJibGUiLCBFRkZFQ1Q6IGVmZmVjdHNbaV0sIE5VTTogZGVmYXVsdFZhbHNbaV0sIFNQUklURTogb2JqLmlkIH0pOw0KICAgICAgICAgIHRoaXMuc2V0RWZmZWN0KHsgVFlQRSA6ICJhcnJvdyIsIEVGRkVDVDogZWZmZWN0c1tpXSwgTlVNOiBkZWZhdWx0VmFsc1tpXSwgU1BSSVRFOiBvYmouaWQgfSk7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5zZXRTdHJldGNoKHsgVFlQRSA6ICJidWJibGUiLCB4OiAxMDAsIHk6IDEwMCwgU1BSSVRFOiBvYmouaWQgfSk7DQogICAgICAgIHRoaXMuc2V0U3RyZXRjaCh7IFRZUEUgOiAiYXJyb3ciLCB4OiAxMDAsIHk6IDEwMCwgU1BSSVRFOiBvYmouaWQgfSk7DQogICAgICB9Ow0KICAgICAgaWYgKGlkID09PSAiX2FsbF8iKSBPYmplY3QudmFsdWVzKGFsbEJ1YmJsZXMpLmZvckVhY2gocmVzZXRlcik7DQogICAgICBlbHNlIHJlc2V0ZXIoeyBpZCB9KTsNCiAgICB9DQogIH0NCg0KICBTY3JhdGNoLmV4dGVuc2lvbnMucmVnaXN0ZXIobmV3IHNwZWVjaFNQKCkpOw0KfSkoU2NyYXRjaCk7DQo="},"customFonts":[{"system":false,"family":"nintendoP_DotGothic12-M","fallback":"Pixel","md5ext":"1ca05737b552e44f181fd0392a793c31.otf"}],"meta":{"semver":"3.0.0","platform":{"name":"TurboWarp","url":"https://turbowarp.org/"}}}